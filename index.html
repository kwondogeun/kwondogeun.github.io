<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>myworld</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="myworld"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="myworld"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="myworld"><meta property="og:url" content="https://kwondogeun.github.io/"><meta property="og:site_name" content="myworld"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://kwondogeun.github.io/img/og_image.png"><meta property="article:author" content="dogeun"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kwondogeun.github.io"},"headline":"myworld","image":["https://kwondogeun.github.io/img/og_image.png"],"author":{"@type":"Person","name":"dogeun"},"publisher":{"@type":"Organization","name":"myworld","logo":{"@type":"ImageObject","url":"https://kwondogeun.github.io/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="myworld" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-12-02T00:54:53.000Z" title="2021. 12. 2. 오전 9:54:53">2021-12-02</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-12-02T01:25:08.149Z" title="2021. 12. 2. 오전 10:25:08">2021-12-02</time></span><span class="level-item">15 minutes read (About 2182 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/02/project02/">project02</a></h1><div class="content"><h2 id="Classification-with-Tidymodels"><a href="#Classification-with-Tidymodels" class="headerlink" title="Classification with Tidymodels"></a>Classification with Tidymodels</h2><h2 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h2><ul>
<li>새로운 ML 라이브러리인 <code> tidymodels</code>를 활용하여 분류 모델을 개발</li>
</ul>
<h2 id="데이터"><a href="#데이터" class="headerlink" title="데이터"></a>데이터</h2><ul>
<li>URL: <a target="_blank" rel="noopener" href="https://datahack.analyticsvidhya.com/contest/practice-problem-loan-prediction-iii/#ProblemStatement">https://datahack.analyticsvidhya.com/contest/practice-problem-loan-prediction-iii/#ProblemStatement</a></li>
<li>Train file, Test file, Submission File</li>
</ul>
<h2 id="대회목적"><a href="#대회목적" class="headerlink" title="대회목적"></a>대회목적</h2><ul>
<li>대출 승인 여부를 결정하는 모델을 만드는 것이 대회의 주 목적이며. 평가지표는 분류모형의 <code>Accurarcy</code>로 결정한다.</li>
</ul>
<h2 id="패키지-및-데이터-볼러오기"><a href="#패키지-및-데이터-볼러오기" class="headerlink" title="패키지 및 데이터 볼러오기"></a>패키지 및 데이터 볼러오기</h2><ul>
<li>필수 패키지 불러오기<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 수집</span></span><br><span class="line">library(readr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 가공</span></span><br><span class="line">library(dplyr) <span class="comment"># 데이터 가공</span></span><br><span class="line">library(tidyr) <span class="comment"># 컬럼 변경</span></span><br><span class="line">library(stringr) <span class="comment"># 문자열 데이터 다루기 </span></span><br><span class="line">library(forcats) <span class="comment"># 범주형 데이터 다루기</span></span><br><span class="line">library(skimr) <span class="comment"># 데이터 요약</span></span><br><span class="line">library(magrittr) <span class="comment"># 파이프라인 작성</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 시각화</span></span><br><span class="line">library(ggplot2) <span class="comment"># 데이터 시각화 </span></span><br><span class="line">library(corrr) <span class="comment"># 상관관계 시각화</span></span><br><span class="line">library(skimr) <span class="comment"># 데이터 요약</span></span><br><span class="line">library(patchwork) <span class="comment"># 데이터 시각화 분할</span></span><br><span class="line">library(GGally) <span class="comment"># 산점도</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 데이터 모델링</span></span><br><span class="line">library(tidymodels) <span class="comment"># ML Packages </span></span><br><span class="line">library(themis) <span class="comment"># class imbalance 처리</span></span><br><span class="line">library(discrim) <span class="comment"># 베이지안 모델링</span></span><br><span class="line">library(tidyposterior) <span class="comment"># 베이지안 모델링 성능 비교</span></span><br><span class="line">library(doParallel) <span class="comment"># CPU cores 확인</span></span><br><span class="line">library(treesnip) <span class="comment"># https://github.com/curso-r/treesnip 사이트에서 받아야함</span></span><br><span class="line"></span><br><span class="line">train = read_csv(<span class="string">&quot;data/train_ctrUa4K.csv&quot;</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">train %&lt;&gt;% rename(Applicant_Income = ApplicantIncome,</span><br><span class="line">                  CoApplicant_Income = CoapplicantIncome,</span><br><span class="line">                  Loan_Amount = LoanAmount) </span><br><span class="line"><span class="comment"># %&lt;&gt;% : 옵션바꾸고 바로적용 저장</span></span><br><span class="line"></span><br><span class="line">loan_id = train$Loan_ID</span><br><span class="line">train %&lt;&gt;% select(-Loan_ID) %&gt;% mutate(Credit_History = <span class="keyword">as</span>.character(Credit_History))</span><br><span class="line"><span class="built_in">str</span>(train)</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="/img/data%EB%B6%88%EB%9F%AC%EC%98%A4%EA%B8%B0.PNG" alt="data"></p>
<ul>
<li>총 614개의 데이터  13개의 칼럼</li>
</ul>
<h2 id="탐색적-자료분석-EDA"><a href="#탐색적-자료분석-EDA" class="headerlink" title="탐색적 자료분석(EDA)"></a>탐색적 자료분석(EDA)</h2><ul>
<li>우선 <code>skim()</code>함수 사용<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skim(train)</span><br></pre></td></tr></table></figure>
<img src="/img/skim.PNG" alt="skim"></li>
</ul>
<h2 id="데이터-시각화"><a href="#데이터-시각화" class="headerlink" title="데이터 시각화"></a>데이터 시각화</h2><h2 id="단변량-시각화"><a href="#단변량-시각화" class="headerlink" title="단변량 시각화"></a>단변량 시각화</h2><ul>
<li>각 개별적인 칼럼에 대해 시각화 자동으로 할 수 있는 코드 작성<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">plot_by_column_type &lt;- function(x, y) &#123;</span><br><span class="line">  <span class="comment"># cat(&quot;y is:&quot;, y)</span></span><br><span class="line">  viz_title &lt;- str_replace_all(y, <span class="string">&quot;_&quot;</span>, <span class="string">&quot; &quot;</span>) %&gt;% </span><br><span class="line">    str_to_title()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;factor&quot;</span> %<span class="keyword">in</span>% <span class="class"><span class="keyword">class</span>(<span class="params">x</span>)) &#123;</span></span><br><span class="line"><span class="class">    <span class="title">ggplot</span>(<span class="params">train, aes(<span class="params">x, fill = x</span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">geom_bar</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme</span>(<span class="params">legend.position = <span class="string">&quot;none&quot;</span>, </span></span></span><br><span class="line"><span class="params"><span class="class">            axis.text.x = element_text(<span class="params">angle = <span class="number">45</span>, hjust = <span class="number">1</span></span>), </span></span></span><br><span class="line"><span class="params"><span class="class">            axis.text = element_text(<span class="params">size = <span class="number">8</span></span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">scale_fill_viridis_d</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme_minimal</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">labs</span>(<span class="params">title = viz_title, y = <span class="string">&quot;&quot;</span>, x = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line"><span class="class">  &#125; <span class="title">else</span> <span class="title">if</span> (<span class="params"><span class="string">&quot;numeric&quot;</span> %<span class="keyword">in</span>% <span class="keyword">class</span>(<span class="params">x</span>)</span>) &#123;</span></span><br><span class="line"><span class="class">    <span class="title">ggplot</span>(<span class="params">train, aes(<span class="params">x</span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">geom_histogram</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">scale_fill_viridis_d</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme_minimal</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">labs</span>(<span class="params">title = viz_title, y = <span class="string">&quot;&quot;</span>, x = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line"><span class="class">  &#125; <span class="title">else</span> <span class="title">if</span> (<span class="params"><span class="string">&quot;integer&quot;</span> %<span class="keyword">in</span>% <span class="keyword">class</span>(<span class="params">x</span>)</span>) &#123;</span></span><br><span class="line"><span class="class">    <span class="title">ggplot</span>(<span class="params">train, aes(<span class="params">x</span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">geom_histogram</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">scale_fill_viridis_d</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme_minimal</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">labs</span>(<span class="params">title = viz_title, y = <span class="string">&quot;&quot;</span>, x = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line"><span class="class">  &#125; <span class="title">else</span> <span class="title">if</span> (<span class="params"><span class="string">&quot;character&quot;</span> %<span class="keyword">in</span>% <span class="keyword">class</span>(<span class="params">x</span>)</span>) &#123;</span></span><br><span class="line"><span class="class">    <span class="title">ggplot</span>(<span class="params">train, aes(<span class="params">x, fill = x</span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">geom_bar</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme</span>(<span class="params">legend.position = <span class="string">&quot;none&quot;</span>, </span></span></span><br><span class="line"><span class="params"><span class="class">            axis.text.x = element_text(<span class="params">angle = <span class="number">45</span>, hjust = <span class="number">1</span></span>), </span></span></span><br><span class="line"><span class="params"><span class="class">            axis.text = element_text(<span class="params">size = <span class="number">8</span></span>)</span>) + </span></span><br><span class="line"><span class="class">      <span class="title">scale_fill_viridis_d</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">theme_minimal</span>() + </span></span><br><span class="line"><span class="class">      <span class="title">labs</span>(<span class="params">title = viz_title, y = <span class="string">&quot;&quot;</span>, x = <span class="string">&quot;&quot;</span></span>)</span></span><br><span class="line"><span class="class">  &#125;</span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">multiple_plots</span> = <span class="title">map2</span>(<span class="params">train, colnames(<span class="params">train</span>), plot_by_column_type</span>) %&gt;% </span></span><br><span class="line"><span class="class">  <span class="title">wrap_plots</span>(<span class="params">ncol = <span class="number">3</span>, nrow = <span class="number">5</span></span>)</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">multiple_plots</span></span></span><br></pre></td></tr></table></figure>
<img src="/img/%EB%8B%A8%EB%B3%80%EB%9F%89.PNG" alt="단변량"></li>
</ul>
<ul>
<li>대출 지원자의 성별은 남성이 여성보다 많다.</li>
<li>대출 지원자의 결혼 유무는 기혼자가 더 많다.</li>
<li>대출 지원자 중 상당수는 자녀가 없다.</li>
<li>대출 지원자 중 상당수는 대학을 졸업했고, self-employed가 아니다.</li>
<li>대출 지원자의 수입은 right skewed이다.</li>
<li>co-applicant의 수입도 right skewed이다.</li>
<li>대출 지원자 중 약 2/3은 대출을 승인받았다.</li>
</ul>
<h2 id="양적-변수-시각화"><a href="#양적-변수-시각화" class="headerlink" title="양적 변수 시각화"></a>양적 변수 시각화</h2><ul>
<li>양적 변수 시각화를 하기 위해서는 산점도를 작성하는 것이 좋다.</li>
<li>관계성을 파악하기에도 매우 유용하다</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">num_df &lt;- train %&gt;% </span><br><span class="line">  select(Loan_Status, where(<span class="keyword">is</span>.numeric)) </span><br><span class="line"></span><br><span class="line"><span class="built_in">str</span>(num_df)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ggpairs(num_df, aes(color = train$Loan_Status, alpha = <span class="number">0.3</span>)) + </span><br><span class="line">  theme_minimal() + </span><br><span class="line">  scale_fill_viridis_d(aesthetics = c(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;fill&quot;</span>), begin = <span class="number">0.15</span>, end = <span class="number">0.85</span>) + </span><br><span class="line">  labs(title = <span class="string">&quot;Numeric Data Analysis&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/img/%EC%96%91%EC%A0%81%EB%B3%80%EC%88%98.PNG" alt="양적변수"></p>
<h2 id="질적-변수-시각화"><a href="#질적-변수-시각화" class="headerlink" title="질적 변수 시각화"></a>질적 변수 시각화</h2><ul>
<li>이번에는 질적 변수 시각화를 진행하도록 한다.</li>
<li>우선, 질적 변수 시각화를 진행하기에 앞서서 평균과 신뢰구간을 구하도록 한다.</li>
<li>평균을 구하려면 우선 숫자 데이터를 만들어야 하는데, Loan_Status 대출을 승인받았으면 1, 그렇지 않으면 0이라고 표시를 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">qual_df &lt;- train %&gt;% </span><br><span class="line">  select(where(<span class="keyword">is</span>.character)) %&gt;% </span><br><span class="line">  drop_na() %&gt;% </span><br><span class="line">  mutate(Loan_Status = if_else(Loan_Status == <span class="string">&quot;Y&quot;</span>, <span class="number">1</span>, <span class="number">0</span>)) %&gt;% </span><br><span class="line">  pivot_longer(<span class="number">1</span>:<span class="number">7</span>, names_to = <span class="string">&quot;Variables&quot;</span>, values_to = <span class="string">&quot;Values&quot;</span>) %&gt;% </span><br><span class="line">  group_by(Variables, Values) %&gt;% </span><br><span class="line">  summarise(mean = mean(Loan_Status), </span><br><span class="line">            conf_val = <span class="number">1.96</span> * sd(Loan_Status) / sqrt(n())) %&gt;% </span><br><span class="line">  pivot_wider(names_from = Variables, values_from = Values)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qual_df</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">viz_plot &lt;- function(data, column_name) &#123;</span><br><span class="line">  column &lt;- sym(column_name)</span><br><span class="line">  <span class="comment"># cat(&quot;column:&quot;, enquo(column_name))</span></span><br><span class="line">  data %&gt;% select(&#123;&#123; column &#125;&#125;, mean, conf_val) %&gt;% </span><br><span class="line">  drop_na() %&gt;% </span><br><span class="line">  ggplot(aes(x= &#123;&#123; column &#125;&#125;, y = mean, color = &#123;&#123; column &#125;&#125;)) +</span><br><span class="line">  geom_point() +</span><br><span class="line">  geom_errorbar(aes(ymin = mean - conf_val, ymax = mean + conf_val), width = <span class="number">0.1</span>) +</span><br><span class="line">  theme_minimal() +</span><br><span class="line">  theme(legend.position = <span class="string">&quot;none&quot;</span>,</span><br><span class="line">        axis.title.x = element_blank(),</span><br><span class="line">        axis.title.y = element_blank()) +</span><br><span class="line">  scale_colour_viridis_d(aesthetics = c(<span class="string">&quot;color&quot;</span>, <span class="string">&quot;fill&quot;</span>), begin = <span class="number">0.15</span>, end = <span class="number">0.85</span>) +</span><br><span class="line">  labs(title=column_name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">column_names = colnames(qual_df %&gt;% select(-c(mean, conf_val)))</span><br><span class="line">plots &lt;- <span class="built_in">list</span>()</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> seq_along(column_names)) &#123;</span><br><span class="line">  p1 &lt;- viz_plot(qual_df, column_names[i])</span><br><span class="line">  plots[[i]] &lt;- p1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wrap_plots(plots) + plot_annotation(</span><br><span class="line">  title = <span class="string">&#x27;Proportion of Loan Data - Categorical Variables&#x27;</span>,</span><br><span class="line">  subtitle = <span class="string">&#x27;With 95% Confidence Intervals&#x27;</span>,</span><br><span class="line">  caption = <span class="string">&#x27;Data Source: Loan Prediction Problem by Analytics Vidhya&#x27;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p><img src="/img/%EC%A7%88%EC%A0%81%EB%B3%80%EC%88%98.PNG" alt="질적변수"></p>
<ul>
<li>Married 지원자가 대출을 승인 받을 가능성이 더 높다.</li>
<li>대졸자가 그렇지 않은 사람보다 대출을 승인 받을 가능성이 더 높다.</li>
<li>자녀들 변수는 큰 영향이 없는 것으로 보인다.</li>
<li>여성 신청자수는 변동성이 큰 반면, 남성들의 경우 상대적으로 변동성이 작아 보인다.</li>
<li>Credit History의 유무에 따라 매우 큰 변동성이 있는 것으로 확인되었다.</li>
</ul>
<h2 id="데이터-분리"><a href="#데이터-분리" class="headerlink" title="데이터 분리"></a>데이터 분리</h2><ul>
<li>약 8:2로 데이터를 분리하도록 하는데, Loan_Status의 비율에 따라서 층화추출(Stratified Sampling) 방식을 취하도록 한다.<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>.seed(<span class="number">101</span>)</span><br><span class="line">loan_split &lt;- initial_split(train, prop = <span class="number">0.8</span>, strata = Loan_Status)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="모델-개발"><a href="#모델-개발" class="headerlink" title="모델 개발"></a>모델 개발</h2><ul>
<li>분류 모형을 개발하도록 한다.</li>
<li>이때, logistic, decision tree, random forest, xgboost 총 4개의 모델을 개발하도록 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">logistic_ml = logistic_reg(penalty = tune(), mixture = tune()) %&gt;% </span><br><span class="line">  set_engine(<span class="string">&quot;glmnet&quot;</span>) %&gt;% </span><br><span class="line">  set_mode(<span class="string">&quot;classification&quot;</span>)</span><br><span class="line"></span><br><span class="line">dt_ml &lt;- decision_tree(cost_complexity = tune(), </span><br><span class="line">                       tree_depth = tune(), </span><br><span class="line">                       min_n = tune()) %&gt;% </span><br><span class="line">  set_engine(<span class="string">&quot;rpart&quot;</span>) %&gt;% </span><br><span class="line">  set_mode(<span class="string">&quot;classification&quot;</span>)</span><br><span class="line"></span><br><span class="line">rf_ml &lt;- rand_forest(mtry = tune(), trees = tune(), min_n = tune()) %&gt;% </span><br><span class="line">  set_engine(<span class="string">&quot;ranger&quot;</span>) %&gt;% </span><br><span class="line">  set_mode(<span class="string">&quot;classification&quot;</span>)</span><br><span class="line">  </span><br><span class="line">xgboost_ml &lt;- boost_tree(mtry = tune(), tree = tune(), min_n = tune(), tree_depth = tune(), learn_rate = tune(), loss_reduction = tune(), sample_size = tune()) %&gt;% </span><br><span class="line">  set_engine(<span class="string">&quot;xgboost&quot;</span>) %&gt;% </span><br><span class="line">  set_mode(<span class="string">&quot;classification&quot;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Feature-Engineering"><a href="#Feature-Engineering" class="headerlink" title="Feature Engineering"></a>Feature Engineering</h2><ul>
<li><code>tidymodels</code>에서는 feature engineering을 수행하기 위해 recipe 함수를 적용한다.</li>
<li>결측치 처리를 위해 bagged tree models, impute_mean, impute_node 등을 사용했다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">recipe_1 &lt;- recipe(Loan_Status ~ ., data = training(loan_split)) %&gt;% </span><br><span class="line">  step_mutate(Credit_History = if_else(Credit_History == <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>)) %&gt;% </span><br><span class="line">  step_scale(all_numeric_predictors(), -Credit_History) %&gt;% </span><br><span class="line">  step_impute_bag(Gender, </span><br><span class="line">                  Married, </span><br><span class="line">                  Dependents, </span><br><span class="line">                  Self_Employed, </span><br><span class="line">                  Loan_Amount, </span><br><span class="line">                  Loan_Amount_Term) %&gt;% </span><br><span class="line">  step_dummy(all_nominal_predictors())</span><br><span class="line"></span><br><span class="line">recipe_2 &lt;- recipe(Loan_Status ~ ., data = training(loan_split)) %&gt;% </span><br><span class="line">  step_mutate(Credit_History = if_else(Credit_History == <span class="number">1</span>, <span class="number">1</span>, -<span class="number">1</span>, <span class="number">0</span>)) %&gt;% </span><br><span class="line">  step_scale(all_numeric_predictors(), -Credit_History) %&gt;%  </span><br><span class="line">  step_impute_mean(all_numeric_predictors()) %&gt;%</span><br><span class="line">  step_impute_mode(all_nominal_predictors()) %&gt;% </span><br><span class="line">  step_dummy(all_nominal_predictors()) %&gt;% </span><br><span class="line">  step_zv(all_predictors())</span><br></pre></td></tr></table></figure>
<ul>
<li>모델 개발을 위해 recipe_1를 적용한 train, validation 데이터를 준비한다.</li>
<li>실제 테스트 데이터가 존재하기 때문에, 여기에서는 validation 이라고 명명했다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">loan_train_df = recipe_1 %&gt;% prep() %&gt;% bake(new_data = NULL)</span><br><span class="line">loan_validation_df = recipe_1 %&gt;% prep() %&gt;% bake(testing(loan_split))</span><br></pre></td></tr></table></figure>

<h2 id="Correlation-Graph"><a href="#Correlation-Graph" class="headerlink" title="Correlation Graph"></a>Correlation Graph</h2><ul>
<li>실제 변환된 데이터를 불러와서 상관관계 그래프를 작성하도록 한다.</li>
<li>먼저 train &amp; validation 데이터를 합치도록 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loan_train_df %&gt;% </span><br><span class="line">  bind_rows(loan_validation_df) %&gt;% </span><br><span class="line">  mutate(Loan_Status = if_else(Loan_Status == <span class="string">&quot;Y&quot;</span>, <span class="number">1</span>, <span class="number">0</span>)) %&gt;% </span><br><span class="line">  correlate() %&gt;% </span><br><span class="line">  rearrange() -&gt; static_correlations</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">static_correlations</span><br></pre></td></tr></table></figure>

<ul>
<li>시각화 작성</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">library(tidyquant)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">static_correlations %&gt;%</span><br><span class="line">    network_plot(min_cor = <span class="number">0.05</span>, colours = c(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;white&quot;</span>, <span class="string">&quot;blue&quot;</span>), legend = TRUE) +</span><br><span class="line">    labs(</span><br><span class="line">        title = <span class="string">&quot;Correlation Plot for Trained Loan Dataset&quot;</span>,</span><br><span class="line">        subtitle = <span class="string">&quot;&quot;</span>, </span><br><span class="line">        caption = <span class="string">&quot;Image by McBert&quot;</span></span><br><span class="line">        ) +</span><br><span class="line">    expand_limits(x = c(-<span class="number">0.1</span>, <span class="number">0.1</span>), y = c(-<span class="number">0.4</span>, <span class="number">0.4</span>)) +</span><br><span class="line">    theme_tq() +</span><br><span class="line">    theme(legend.position = <span class="string">&quot;bottom&quot;</span>, </span><br><span class="line">          axis.text = element_text(size = <span class="number">10</span>))</span><br></pre></td></tr></table></figure>

<p><img src="/img/%EB%AA%A8%EB%8D%B8%EA%B0%9C%EB%B0%9C.PNG" alt="모델개발"></p>
<ul>
<li>위 그래프를 보면, <code>Loan_Status</code>와 가장 연관성이 큰 데이터는 <code>Credit_History</code>이다. 상식적으로 생각해도, 기존 대출 이력이 있는 사람에게 더 많은 대출을 하고자 하는 은행의 경향성을 생각하면 대략적으로 이해가 가는 결과임을 알 수 있다.</li>
</ul>
<h2 id="Workflow-sets"><a href="#Workflow-sets" class="headerlink" title="Workflow sets"></a>Workflow sets</h2><ul>
<li>Recipe List와 Model List</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">recipe_list &lt;- <span class="built_in">list</span>(Recipe1 = recipe_1, Recipe2 = recipe_2)</span><br><span class="line">model_list &lt;- <span class="built_in">list</span>(Random_Forest = rf_ml, Decision_Tree = dt_ml, Logistic_Regression = logistic_ml, XGBoost = xgboost_ml)</span><br></pre></td></tr></table></figure>

<ul>
<li>workflow_sets()를 활용하여 최종적인 model_set를 완료한다.</li>
<li>cross = T는 recipe의 각 조건과 머신러닝 알고리즘과 매칭되는 모든 가능한 조건들을 Combination 하도록 허락하는 설정으로 이해하면 된다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model_set = workflow_set(preproc = recipe_list, models = model_list, cross = T)</span><br></pre></td></tr></table></figure>

<h2 id="모델-학습"><a href="#모델-학습" class="headerlink" title="모델 학습"></a>모델 학습</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span>.seed(<span class="number">2</span>)</span><br><span class="line">train_resamples = bootstraps(training(loan_split), strata = Loan_Status)</span><br><span class="line">detectCores()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">registerDoParallel(cores = <span class="number">6</span>)</span><br><span class="line">all_workflows &lt;- model_set %&gt;% workflow_map(resamples = train_resamples, verbose = TRUE)</span><br></pre></td></tr></table></figure>

<h2 id="모델학습-비교"><a href="#모델학습-비교" class="headerlink" title="모델학습 비교"></a>모델학습 비교</h2><ul>
<li>이제 모형 학습이 완료가 되었다면, 시각화로 어떤 모델이 좋은지를 확인해보도록 한다.</li>
<li>우선 학습된 데이터를 확인해보도록 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">library(tune)</span><br><span class="line">collect_metrics(all_workflows)</span><br></pre></td></tr></table></figure>

<ul>
<li>현재 결과물에서 accuracy에서 추출하고, 그 외 필요한 데이터 가공을 진행하도록 한다.</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">collect_metrics(all_workflows) %&gt;% </span><br><span class="line">  tidyr::separate(wflow_id, into = c(<span class="string">&quot;Recipe&quot;</span>, <span class="string">&quot;Model_Type&quot;</span>), sep = <span class="string">&quot;_&quot;</span>, remove = F, extra = <span class="string">&quot;merge&quot;</span>) %&gt;% </span><br><span class="line">  <span class="built_in">filter</span>(.metric == <span class="string">&quot;accuracy&quot;</span>) %&gt;% </span><br><span class="line">  group_by(model) %&gt;% </span><br><span class="line">  select(-.config) %&gt;% </span><br><span class="line">  distinct() %&gt;% </span><br><span class="line">  group_by(Recipe, Model_Type, .metric) %&gt;% </span><br><span class="line">  summarise(mean = mean(mean), </span><br><span class="line">            std_err = mean(std_err), .groups = <span class="string">&quot;drop&quot;</span>) %&gt;% </span><br><span class="line">  mutate(Workflow_Rank = row_number(-mean), </span><br><span class="line">         .metric = str_to_upper(.metric)) %&gt;% </span><br><span class="line">  ggplot(aes(x = Workflow_Rank, y = mean, shape = Recipe, color = Model_Type)) + </span><br><span class="line">  geom_point(size = <span class="number">2</span>, alpha = <span class="number">0.7</span>) + </span><br><span class="line">  geom_errorbar(aes(ymin = mean-std_err, ymax = mean + std_err), position = position_dodge(<span class="number">0.9</span>)) + </span><br><span class="line">  theme_minimal() + </span><br><span class="line">  labs(title = <span class="string">&quot;Performance Comparison of Workflow Sets with Tidymodels&quot;</span>, </span><br><span class="line">       subtitle = <span class="string">&quot;Bootstrap Resamplings Procedure 25 Times&quot;</span>, </span><br><span class="line">       caption = <span class="string">&quot;Image Created By McBert&quot;</span>, </span><br><span class="line">       x = <span class="string">&quot;WorkFlow Rank by ML Model&quot;</span>, </span><br><span class="line">       y = <span class="string">&quot;Accuracy&quot;</span>, </span><br><span class="line">       color = <span class="string">&quot;Model Types&quot;</span>, </span><br><span class="line">       shape = <span class="string">&quot;Recipes&quot;</span>)</span><br></pre></td></tr></table></figure>

<p><img src="/img/%EB%AA%A8%EB%8D%B8%EB%B9%84%EA%B5%90.PNG" alt="모델비교"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-26T02:50:53.000Z" title="2021. 11. 26. 오전 11:50:53">2021-11-26</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-26T02:51:30.316Z" title="2021. 11. 26. 오전 11:51:30">2021-11-26</time></span><span class="level-item">33 minutes read (About 4975 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/26/project01/">project01</a></h1><div class="content"><h1 id="Introduce"><a href="#Introduce" class="headerlink" title="Introduce"></a>Introduce</h1><ul>
<li>주제<ul>
<li>중국과 일본의 캐글러 트렌드</li>
</ul>
</li>
<li>선정이유<ul>
<li>동아시아중 가장 큰 영향력을 행사</li>
<li>비슷한 캐글러의 분포</li>
</ul>
</li>
<li>개요<ul>
<li>2019년도 자료와 2021년도 자료기반 비교</li>
</ul>
</li>
</ul>
<p>##DATA</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line"><span class="keyword">from</span> plotly.subplots <span class="keyword">import</span> make_subplots</span><br><span class="line"><span class="keyword">from</span> plotly.offline <span class="keyword">import</span> plot, iplot, init_notebook_mode</span><br><span class="line">init_notebook_mode(connected=<span class="literal">True</span>)</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">gen_colors = [<span class="string">&#x27;#4169E1&#x27;</span>,<span class="string">&#x27;#B2182B&#x27;</span>,<span class="string">&#x27;#81007F&#x27;</span>,<span class="string">&#x27;#D1B2FF&#x27;</span>,<span class="string">&#x27;#EFE4E2&#x27;</span>]</span><br><span class="line">JP_colors = [<span class="string">&#x27;#D90B0B&#x27;</span>,<span class="string">&#x27;#F24444&#x27;</span>,<span class="string">&#x27;#EFE4E2&#x27;</span>,<span class="string">&#x27;#FCCE88&#x27;</span>,<span class="string">&#x27;#64807F&#x27;</span>]</span><br><span class="line">CN_colors = [<span class="string">&#x27;#E0201B&#x27;</span>,<span class="string">&#x27;#FFCE3F&#x27;</span>,<span class="string">&#x27;#A63F03&#x27;</span>,<span class="string">&#x27;#04BF33&#x27;</span>,<span class="string">&#x27;#F2E6D8&#x27;</span>]</span><br><span class="line">coun_years_colors = [<span class="string">&#x27;#FDB0C0&#x27;</span>,<span class="string">&#x27;#FFDB81&#x27;</span>,<span class="string">&#x27;#FD4659&#x27;</span>,<span class="string">&#x27;#FFAB0F&#x27;</span>]</span><br><span class="line"></span><br><span class="line">coun_years = [<span class="string">&#x27;2019_JP&#x27;</span>,<span class="string">&#x27;2019_CN&#x27;</span>,<span class="string">&#x27;2021_JP&#x27;</span>,<span class="string">&#x27;2021_CN&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19 = pd.read_csv(<span class="string">&#x27;../input/kaggle-survey-2019/multiple_choice_responses.csv&#x27;</span>)</span><br><span class="line">df21 = pd.read_csv(<span class="string">&#x27;../input/kaggle-survey-2021/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21.head()</span><br></pre></td></tr></table></figure>
<p><img src="/img/head.PNG" alt="head"></p>
<ul>
<li>19년도 자료와 21년도 자료를 기반으로 데이터셋</li>
<li>2019년일본 ,2021년일본 , 2019년중국 , 2021년중국으로 분류</li>
</ul>
<h2 id="DataFrame"><a href="#DataFrame" class="headerlink" title="DataFrame"></a>DataFrame</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># define</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">group</span>(<span class="params">data, country, question_num</span>):</span></span><br><span class="line">    <span class="keyword">return</span> data[data[<span class="string">&#x27;Q3&#x27;</span>] == country][question_num].value_counts()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">go_Pie</span>(<span class="params">country, label_value</span>):</span></span><br><span class="line">    <span class="keyword">return</span> go.Pie(title = country,</span><br><span class="line">                  labels = label_value.index,</span><br><span class="line">                  values = label_value.values,</span><br><span class="line">                  textinfo = <span class="string">&#x27;label+percent&#x27;</span>,</span><br><span class="line">                  rotation=<span class="number">315</span>,</span><br><span class="line">                  hole = <span class="number">.3</span>,)</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Q1</span></span><br><span class="line">JP_age_19 = group(df19,<span class="string">&#x27;Japan&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>).sort_index()</span><br><span class="line"></span><br><span class="line">JP_age_21 = group(df21,<span class="string">&#x27;Japan&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>).sort_index()</span><br><span class="line"></span><br><span class="line">CN_age_19 = group(df19,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>)</span><br><span class="line">CN_age_19.loc[<span class="string">&#x27;55-59&#x27;</span>] = <span class="number">0</span></span><br><span class="line">CN_age_19.loc[<span class="string">&#x27;60-69&#x27;</span>] = <span class="number">0</span></span><br><span class="line">CN_age_19 = CN_age_19.sort_index()</span><br><span class="line"></span><br><span class="line">CN_age_21 = group(df21,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Q1&#x27;</span>)</span><br><span class="line">CN_age_21.loc[<span class="string">&#x27;60-69&#x27;</span>] = <span class="number">0</span></span><br><span class="line">CN_age_21 = CN_age_21.sort_index()</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Q3</span></span><br><span class="line">JP_ndarray = df19[df19[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;Japan&#x27;</span>][<span class="string">&#x27;Q2&#x27;</span>].values</span><br><span class="line">CN_ndarray = df19[df19[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>][<span class="string">&#x27;Q2&#x27;</span>].values</span><br><span class="line">JP_age_list = [] <span class="comment"># &#x27;Male&#x27;을 &#x27;Man&#x27;으로 바꿔담을 빈 리스트 생성</span></span><br><span class="line">CN_age_list = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> JP_ndarray:</span><br><span class="line">    <span class="keyword">if</span> item == <span class="string">&#x27;Male&#x27;</span>:</span><br><span class="line">        <span class="comment"># 문자열 치환</span></span><br><span class="line">        item_mod = item.replace(<span class="string">&#x27;Male&#x27;</span>,<span class="string">&#x27;Man&#x27;</span>)</span><br><span class="line">        <span class="comment"># 새로운 리스트에 추가</span></span><br><span class="line">        JP_age_list.append(item_mod)</span><br><span class="line">    <span class="keyword">elif</span> item == <span class="string">&#x27;Female&#x27;</span>:</span><br><span class="line">        item_mod2 = item.replace(<span class="string">&#x27;Female&#x27;</span>,<span class="string">&#x27;Woman&#x27;</span>)</span><br><span class="line">        JP_age_list.append(item_mod2)</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        JP_age_list.append(item)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> CN_ndarray:</span><br><span class="line">    <span class="keyword">if</span> item == <span class="string">&#x27;Male&#x27;</span>:</span><br><span class="line">        <span class="comment"># 문자열 치환</span></span><br><span class="line">        item_mod = item.replace(<span class="string">&#x27;Male&#x27;</span>,<span class="string">&#x27;Man&#x27;</span>)</span><br><span class="line">        <span class="comment"># 새로운 리스트에 추가</span></span><br><span class="line">        CN_age_list.append(item_mod)</span><br><span class="line">    <span class="keyword">elif</span> item == <span class="string">&#x27;Female&#x27;</span>:</span><br><span class="line">        item_mod2 = item.replace(<span class="string">&#x27;Female&#x27;</span>,<span class="string">&#x27;Woman&#x27;</span>)</span><br><span class="line">        CN_age_list.append(item_mod2)</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        CN_age_list.append(item)</span><br><span class="line"></span><br><span class="line">JP_age_series = pd.Series(JP_age_list)</span><br><span class="line">CN_age_series = pd.Series(CN_age_list)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">years = [<span class="string">&#x27;2019&#x27;</span>, <span class="string">&#x27;2021&#x27;</span>]</span><br><span class="line">JP_country_count_19 = (df19[df19[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;Japan&#x27;</span>][<span class="string">&#x27;Q3&#x27;</span>]).count()</span><br><span class="line">CN_country_count_19 = (df19[df19[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>][<span class="string">&#x27;Q3&#x27;</span>]).count()</span><br><span class="line">JP_country_count_21 = (df21[df21[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;Japan&#x27;</span>][<span class="string">&#x27;Q3&#x27;</span>]).count()</span><br><span class="line">CN_country_count_21 = (df21[df21[<span class="string">&#x27;Q3&#x27;</span>] == <span class="string">&#x27;China&#x27;</span>][<span class="string">&#x27;Q3&#x27;</span>]).count()</span><br><span class="line"></span><br><span class="line">JP_country_count_19_21 = [JP_country_count_19, JP_country_count_21]</span><br><span class="line">CN_country_count_19_21 = [CN_country_count_19, CN_country_count_21]</span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Q14</span></span><br><span class="line">df19_JP = df19[df19.Q3.isin([<span class="string">&#x27;Japan&#x27;</span>])]</span><br><span class="line">df19_CN = df19[df19.Q3.isin([<span class="string">&#x27;China&#x27;</span>])]</span><br><span class="line">df21_JP = df21[df21.Q3.isin([<span class="string">&#x27;Japan&#x27;</span>])]</span><br><span class="line">df21_CN = df21[df21.Q3.isin([<span class="string">&#x27;China&#x27;</span>])]</span><br><span class="line">df19_JP_Q14 = pd.DataFrame()</span><br><span class="line">df19_CN_Q14 = pd.DataFrame()</span><br><span class="line">df21_JP_Q14 = pd.DataFrame()</span><br><span class="line">df21_CN_Q14 = pd.DataFrame()</span><br><span class="line">df19_JP_Q14[<span class="string">&#x27;Q20&#x27;</span>] = [df19_JP[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_JP.columns[<span class="number">97</span>:<span class="number">109</span>]]</span><br><span class="line">df19_CN_Q14[<span class="string">&#x27;Q20&#x27;</span>] = [df19_CN[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_CN.columns[<span class="number">97</span>:<span class="number">109</span>]]</span><br><span class="line">df21_JP_Q14[<span class="string">&#x27;Q14&#x27;</span>] = [df21_JP[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_JP.columns[<span class="number">59</span>:<span class="number">71</span>]]</span><br><span class="line">df21_CN_Q14[<span class="string">&#x27;Q14&#x27;</span>] = [df21_CN[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_CN.columns[<span class="number">59</span>:<span class="number">71</span>]]</span><br><span class="line">df19_JP_Q14[<span class="string">&#x27;counts&#x27;</span>] = [df19_JP[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_JP.columns[<span class="number">97</span>:<span class="number">109</span>]]</span><br><span class="line">df19_CN_Q14[<span class="string">&#x27;counts&#x27;</span>] = [df19_CN[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_CN.columns[<span class="number">97</span>:<span class="number">109</span>]]</span><br><span class="line">df21_JP_Q14[<span class="string">&#x27;counts&#x27;</span>] = [df21_JP[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_JP.columns[<span class="number">59</span>:<span class="number">71</span>]]</span><br><span class="line">df21_CN_Q14[<span class="string">&#x27;counts&#x27;</span>] = [df21_CN[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_CN.columns[<span class="number">59</span>:<span class="number">71</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19_JP_Q14.index = [<span class="number">3</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">df19_CN_Q14.index = [<span class="number">3</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">df19_JP_Q14 = df19_JP_Q14.sort_index()</span><br><span class="line">df19_CN_Q14 = df19_CN_Q14.sort_index()</span><br><span class="line">df21_JP_Q14[<span class="string">&#x27;Q14&#x27;</span>].index = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">df21_CN_Q14[<span class="string">&#x27;Q14&#x27;</span>].index = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>]</span><br><span class="line">df19_JP_Q14.replace(regex = <span class="string">&#x27;D3.js&#x27;</span>, value = <span class="string">&#x27;D3 js&#x27;</span>, inplace = <span class="literal">True</span>)</span><br><span class="line">df19_CN_Q14.replace(regex = <span class="string">&#x27;D3.js&#x27;</span>, value = <span class="string">&#x27;D3 js&#x27;</span>, inplace = <span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Q16</span></span><br><span class="line">df19_JP_Q16 = pd.DataFrame()</span><br><span class="line">df19_CN_Q16 = pd.DataFrame()</span><br><span class="line">df21_JP_Q16 = pd.DataFrame()</span><br><span class="line">df21_CN_Q16 = pd.DataFrame()</span><br><span class="line">df19_JP_Q16[<span class="string">&#x27;Q28&#x27;</span>] = [df19_JP[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_JP.columns[<span class="number">155</span>:<span class="number">166</span>]]</span><br><span class="line">df19_CN_Q16[<span class="string">&#x27;Q28&#x27;</span>] = [df19_CN[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_CN.columns[<span class="number">155</span>:<span class="number">166</span>]]</span><br><span class="line">df21_JP_Q16[<span class="string">&#x27;Q16&#x27;</span>] = [df21_JP[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_JP.columns[<span class="number">72</span>:<span class="number">89</span>]]</span><br><span class="line">df21_CN_Q16[<span class="string">&#x27;Q16&#x27;</span>] = [df21_CN[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_CN.columns[<span class="number">72</span>:<span class="number">89</span>]]</span><br><span class="line">df19_JP_Q16[<span class="string">&#x27;counts&#x27;</span>] = [df19_JP[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_JP.columns[<span class="number">155</span>:<span class="number">166</span>]]</span><br><span class="line">df19_CN_Q16[<span class="string">&#x27;counts&#x27;</span>] = [df19_CN[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_CN.columns[<span class="number">155</span>:<span class="number">166</span>]]</span><br><span class="line">df21_JP_Q16[<span class="string">&#x27;counts&#x27;</span>] = [df21_JP[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_JP.columns[<span class="number">72</span>:<span class="number">89</span>]]</span><br><span class="line">df21_CN_Q16[<span class="string">&#x27;counts&#x27;</span>] = [df21_CN[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_CN.columns[<span class="number">72</span>:<span class="number">89</span>]]</span><br><span class="line">df19_JP_Q16 = df19_JP_Q16.sort_index()</span><br><span class="line">df19_CN_Q16 = df19_CN_Q16.sort_index()</span><br></pre></td></tr></table></figure>

<h1 id="What-your-age"><a href="#What-your-age" class="headerlink" title="What your age?"></a>What your age?</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig_age = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">2</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;]])</span><br><span class="line"></span><br><span class="line">fig_age.add_trace(go.Bar(name=coun_years[<span class="number">0</span>], x=JP_age_19.index, y=JP_age_19.values, marker_color=<span class="string">&#x27;#FDB0C0&#x27;</span>),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_age.add_trace(go.Bar(name=coun_years[<span class="number">2</span>], x=JP_age_21.index, y=JP_age_21.values, marker_color=<span class="string">&#x27;#FD4659&#x27;</span>),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_age.add_trace(go.Bar(name=coun_years[<span class="number">1</span>], x=CN_age_19.index, y=CN_age_19.values, marker_color=<span class="string">&#x27;#FFDB81&#x27;</span>),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fig_age.add_trace(go.Bar(name=coun_years[<span class="number">3</span>], x=CN_age_21.index, y=CN_age_21.values, marker_color=<span class="string">&#x27;#FFAB0F&#x27;</span>),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig_age.update_layout(barmode=<span class="string">&#x27;group&#x27;</span>, title_text=<span class="string">&#x27;2019 &amp; 2021, Japan and China age distribution&#x27;</span>, showlegend=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig_age.update_xaxes(title_text=<span class="string">&#x27;Japan Age distribution&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_age.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_age.update_xaxes(title_text=<span class="string">&#x27;China Age distribution&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line">fig_age.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig_age.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/whatage.PNG" alt="whatage"></p>
<h3 id="나이-분포도"><a href="#나이-분포도" class="headerlink" title="나이 분포도"></a>나이 분포도</h3><h3 id="일본"><a href="#일본" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년도에 25-29세의 분포가 가장 크게 나타났으며, 다음으로는 30-34 , 35-39 비율이 가장 높다.</li>
<li>2021년도에 25-29세의 비율이 가장 높았으며, 2019년도 자료와 점유율은 비슷하지만 모든 연령층이 증가한것을 볼 수 있다.</li>
<li>가장 눈에 띄는것은 18-21세의 비율이 급격하게 높아진것과 35-49세 이상의 나이 분포도가 모두 급격하게 증가한것이 눈에 띈다.</li>
</ul>
</blockquote>
<h3 id="중국"><a href="#중국" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년도에 22-24 , 25-29 , 18-21 순서대로 높았으며 젊은층의 비율이 압도적으로 높은것을 볼수 있다.</li>
<li>2019년도에 비해 2021년에 전 연령대비 비율이 증가했지만, 18-21, 22-24, 30-34의 분포도가 압도적으로 높아진것을 볼 수 있다.</li>
<li>가장 눈에 띄는것은 젊은층의 비율 18-21, 22-24의 분포가 급격하게 높아졌으며 30-34 분포 또한 소폭 상승했으며 그 외에는 미미하거나 조금 높아 졌다.</li>
</ul>
</blockquote>
<h3 id="중국은-22-24세의-비율이-가장-높으며-일본은-25-29세의-비율이-가장-높다"><a href="#중국은-22-24세의-비율이-가장-높으며-일본은-25-29세의-비율이-가장-높다" class="headerlink" title="중국은 22-24세의 비율이 가장 높으며, 일본은 25-29세의 비율이 가장 높다."></a>중국은 22-24세의 비율이 가장 높으며, 일본은 25-29세의 비율이 가장 높다.</h3><h3 id="두-나라-모두-젊은층의-점유율이-가장-높은-것을-알-수-있다"><a href="#두-나라-모두-젊은층의-점유율이-가장-높은-것을-알-수-있다" class="headerlink" title="두 나라 모두 젊은층의 점유율이 가장 높은 것을 알 수 있다."></a>두 나라 모두 젊은층의 점유율이 가장 높은 것을 알 수 있다.</h3><h1 id="what-is-your-gender"><a href="#what-is-your-gender" class="headerlink" title="what is your gender?"></a>what is your gender?</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">fig = make_subplots(rows=<span class="number">2</span>, cols=<span class="number">2</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;],</span><br><span class="line">                                           [&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;domain&#x27;</span>&#125;]])</span><br><span class="line"></span><br><span class="line">fig.add_trace(go_Pie(<span class="string">&#x27;2019_Japan&#x27;</span>, JP_age_series.value_counts()),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig.add_trace(go_Pie(<span class="string">&#x27;2019_China&#x27;</span>, CN_age_series.value_counts()),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fig.add_trace(go_Pie(<span class="string">&#x27;2021_Japan&#x27;</span>, group(df21,<span class="string">&#x27;Japan&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>)),<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">fig.add_trace(go_Pie(<span class="string">&#x27;2021_China&#x27;</span>, group(df21,<span class="string">&#x27;China&#x27;</span>,<span class="string">&#x27;Q2&#x27;</span>)),<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=gen_colors[<span class="number">0</span>:]),</span><br><span class="line">                  rotation=<span class="number">180</span>)</span><br><span class="line">fig.update_layout(title_text=<span class="string">&#x27;Gender Distribution&#x27;</span>,</span><br><span class="line">                  showlegend=<span class="literal">True</span>,</span><br><span class="line">                  autosize=<span class="literal">True</span>,</span><br><span class="line">                  height=<span class="number">700</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/whatgender.PNG" alt="whatgender"></p>
<h2 id="성비율"><a href="#성비율" class="headerlink" title="성비율"></a>성비율</h2><h3 id="일본-1"><a href="#일본-1" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년도와 2021년도 모두 남성의 비율이 높으며 여성의 비율은 미미하게 감소했다.</li>
</ul>
</blockquote>
<h3 id="중국-1"><a href="#중국-1" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년도와 2021년도 모두 남성의 비율이 높으며 여성의 비율은 미미하게 감소했다.</li>
</ul>
</blockquote>
<h3 id="일본과-중국-모두-남성의-비율이-압도적으로-높다"><a href="#일본과-중국-모두-남성의-비율이-압도적으로-높다" class="headerlink" title="일본과 중국 모두 남성의 비율이 압도적으로 높다"></a>일본과 중국 모두 남성의 비율이 압도적으로 높다</h3><h3 id="증가한-캐글러들의-성비가-남성의-유입이-많은걸-알-수-있다"><a href="#증가한-캐글러들의-성비가-남성의-유입이-많은걸-알-수-있다" class="headerlink" title="증가한 캐글러들의 성비가 남성의 유입이 많은걸 알 수 있다."></a>증가한 캐글러들의 성비가 남성의 유입이 많은걸 알 수 있다.</h3><h1 id="Country"><a href="#Country" class="headerlink" title="Country"></a>Country</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fig_country = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;Japan&#x27;</span>, x=years, y=JP_country_count_19_21, marker_color=JP_colors[<span class="number">0</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;China&#x27;</span>, x=years, y=CN_country_count_19_21, marker_color=CN_colors[<span class="number">1</span>])</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">fig_country.update_layout(</span><br><span class="line">                    barmode=<span class="string">&#x27;group&#x27;</span>,</span><br><span class="line">                    title_text=<span class="string">&#x27;2019 &amp; 2021, the number of Kaggler living in Japan and China&#x27;</span>,</span><br><span class="line">                    xaxis_title=<span class="string">&#x27;Years&#x27;</span>,</span><br><span class="line">                    yaxis_title=<span class="string">&#x27;Counts&#x27;</span>)</span><br><span class="line">fig_country.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/country.PNG" alt="country"></p>
<h2 id="인원의-증감"><a href="#인원의-증감" class="headerlink" title="인원의 증감"></a>인원의 증감</h2><h3 id="일본-2"><a href="#일본-2" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년 673명, 2021년에는 921명으로 약 248명정도 증가 했다.</li>
</ul>
</blockquote>
<h3 id="중국-2"><a href="#중국-2" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년 574명, 2021년에는 814명으로 약 240명정도 증가 했다.</li>
</ul>
</blockquote>
<h3 id="일본이-중국보다-약-90명정도-캐글러가-많으며"><a href="#일본이-중국보다-약-90명정도-캐글러가-많으며" class="headerlink" title="일본이 중국보다 약 90명정도 캐글러가 많으며,"></a>일본이 중국보다 약 90명정도 캐글러가 많으며,</h3><h3 id="2019년대비-2021년-현재-두-나라-모두-증가했음을-알-수-있다"><a href="#2019년대비-2021년-현재-두-나라-모두-증가했음을-알-수-있다" class="headerlink" title="2019년대비 2021년 현재 두 나라 모두 증가했음을 알 수 있다."></a>2019년대비 2021년 현재 두 나라 모두 증가했음을 알 수 있다.</h3><h1 id="visualization-libraries-or-tools"><a href="#visualization-libraries-or-tools" class="headerlink" title="visualization libraries or tools"></a>visualization libraries or tools</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">fig_T = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">2</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;]])</span><br><span class="line"></span><br><span class="line">fig_T.add_trace(go.Bar(name=coun_years[<span class="number">0</span>], x=df19_JP_Q14[<span class="string">&#x27;Q20&#x27;</span>].values, y=df19_JP_Q14[<span class="string">&#x27;counts&#x27;</span>].values, marker_color=coun_years_colors[<span class="number">0</span>]),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_T.add_trace(go.Bar(name=coun_years[<span class="number">1</span>], x=df19_CN_Q14[<span class="string">&#x27;Q20&#x27;</span>].values, y=df19_CN_Q14[<span class="string">&#x27;counts&#x27;</span>].values, marker_color=coun_years_colors[<span class="number">1</span>]),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_T.add_trace(go.Bar(name=coun_years[<span class="number">2</span>], x=df21_JP_Q14[<span class="string">&#x27;Q14&#x27;</span>].values, y=df21_JP_Q14[<span class="string">&#x27;counts&#x27;</span>].values, marker_color=coun_years_colors[<span class="number">2</span>]),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fig_T.add_trace(go.Bar(name=coun_years[<span class="number">3</span>], x=df21_CN_Q14[<span class="string">&#x27;Q14&#x27;</span>].values, y=df21_CN_Q14[<span class="string">&#x27;counts&#x27;</span>].values, marker_color=coun_years_colors[<span class="number">3</span>]),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig_T.update_layout(title_text=<span class="string">&#x27;2019 &amp; 2021, Visualization Library and Tools in Use&#x27;</span>,</span><br><span class="line">                    showlegend=<span class="literal">True</span>,</span><br><span class="line">                    autosize=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig_T.update_xaxes(title_text=<span class="string">&#x27;2019 Library and Tools&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_T.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_T.update_xaxes(title_text=<span class="string">&#x27;2021 Library and Tools&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line">fig_T.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig_T.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/tools.PNG" alt="tools"></p>
<h2 id="라이브러리와-툴-프로그램"><a href="#라이브러리와-툴-프로그램" class="headerlink" title="라이브러리와 툴 프로그램"></a>라이브러리와 툴 프로그램</h2><h3 id="일본-3"><a href="#일본-3" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년 일본은 Matplotlib수치가 367로 가장 높은 비율이며, 두번째로는 seaborn(247) 세번째로는 Ggplot/ggplot2(79) 네번째로는 Plotly(61)이다.</li>
<li>2021년 일본은 Matplotlib수치가 660로 가장 높은 비율이며, 두번째로는 seaborn(412) 세번째로는 None(137) 네번째는 Plotly(115) 다섯번째가 Ggplot/gglot2(74)이다.</li>
<li>2019년 대비 Matplotlib가 2배에 가까운 수치로 증가했으며, seaborn이 뒤를 따르고 있다. None의 응답수도 많아졌으며, 2019년에 세번째로 비율이 높았던 Ggplot/ggplot2의 인원과 비율이 줄었다.</li>
<li>Plotly는 2019년 대비 인원과 비율이 증가했으며 None의 응답을 제외하면 3번째의 비율을 차지하고 있다.</li>
</ul>
</blockquote>
<h3 id="중국-3"><a href="#중국-3" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년 중국은 Matplotlib수치가 321로 가장 높은 비율이며, 두번째로는 seaborn(160) 세번째로는 Ggplot/gglot2(54) 네번째로는 Plotly(50)이다.</li>
<li>2021년 중국은 Matplotlib수치가 491로 가장 높은 비율이며, 두번째로는 Seaborn(215) 세번째로는 None(155) 네번째는 Plotly(75) 다섯번째로 Ggplot/ggplot2(72)이다.</li>
<li>2019년 대비 Matplotlib의 수치가 약 170명 정도 늘어 났고 seaborn 또한 약 50명정도 늘어났으며 세번째로 높았던 Ggplot/ggplot2의 시용은 소폭 증가했지만 Plotly의 증가에 뒤쳐졌다. None의 응답수가 눈에 띄게 증가했다.</li>
</ul>
</blockquote>
<h3 id="2019년과-대비해-기존에-높았던-Matplotlib와-Seaborn-차지-비율은-더-높아졌고-Plotly-Plotly-Express이-Ggplot-ggplot2를-제치고-증가했다"><a href="#2019년과-대비해-기존에-높았던-Matplotlib와-Seaborn-차지-비율은-더-높아졌고-Plotly-Plotly-Express이-Ggplot-ggplot2를-제치고-증가했다" class="headerlink" title="2019년과 대비해 기존에 높았던 Matplotlib와 Seaborn 차지 비율은 더 높아졌고 Plotly/Plotly Express이 Ggplot/ggplot2를 제치고 증가했다."></a>2019년과 대비해 기존에 높았던 Matplotlib와 Seaborn 차지 비율은 더 높아졌고 Plotly/Plotly Express이 Ggplot/ggplot2를 제치고 증가했다.</h3><h1 id="Japan-amp-China-programming-languages"><a href="#Japan-amp-China-programming-languages" class="headerlink" title="Japan &amp; China programming languages"></a>Japan &amp; China programming languages</h1><h2 id="Dataset"><a href="#Dataset" class="headerlink" title="Dataset"></a>Dataset</h2><h3 id="2021년-Q3-Country-일본-중국-추출-dataframe"><a href="#2021년-Q3-Country-일본-중국-추출-dataframe" class="headerlink" title="2021년 Q3(Country) 일본 중국 추출 dataframe"></a>2021년 Q3(Country) 일본 중국 추출 dataframe</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df21_ChJp = df21[df21.Q3.isin([<span class="string">&quot;Japan&quot;</span>,<span class="string">&quot;China&quot;</span>])]</span><br><span class="line"></span><br><span class="line">df21_ChJp_total_PL = pd.DataFrame()</span><br><span class="line">df21_ChJp_total_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df21_ChJp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_ChJp.columns[<span class="number">7</span>:<span class="number">20</span>]]</span><br><span class="line">df21_ChJp_total_PL[<span class="string">&#x27;counts&#x27;</span>] = [df21_ChJp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_ChJp.columns[<span class="number">7</span>:<span class="number">20</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="2019년-Q3-Country-일본-중국-추출-dataframe"><a href="#2019년-Q3-Country-일본-중국-추출-dataframe" class="headerlink" title="2019년 Q3(Country) 일본 중국 추출 dataframe"></a>2019년 Q3(Country) 일본 중국 추출 dataframe</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df19_ChJp = df19[df19.Q3.isin([<span class="string">&quot;Japan&quot;</span>,<span class="string">&quot;China&quot;</span>])]</span><br><span class="line"></span><br><span class="line">df19_ChJp_total_PL = pd.DataFrame()</span><br><span class="line">df19_ChJp_total_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df19_ChJp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_ChJp.columns[<span class="number">82</span>:<span class="number">94</span>]]</span><br><span class="line">df19_ChJp_total_PL[<span class="string">&#x27;counts&#x27;</span>] = [df19_ChJp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_ChJp.columns[<span class="number">82</span>:<span class="number">94</span>]]</span><br></pre></td></tr></table></figure>

<h3 id="나라별-value-counts를-위해-각-나라로-dataframe-분리"><a href="#나라별-value-counts를-위해-각-나라로-dataframe-분리" class="headerlink" title="나라별 value_counts를 위해 각 나라로 dataframe 분리"></a>나라별 value_counts를 위해 각 나라로 dataframe 분리</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">df21_Ch = df21_ChJp[df21_ChJp.Q3.isin([<span class="string">&quot;China&quot;</span>])]</span><br><span class="line">df21_Jp = df21_ChJp[df21_ChJp.Q3.isin([<span class="string">&quot;Japan&quot;</span>])]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Q7(Program_Language): 칼럼번호 8~20 - others</span></span><br><span class="line">df21_Jp_PL = pd.DataFrame()</span><br><span class="line">df21_Jp_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df21_Jp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Jp.columns[<span class="number">7</span>:<span class="number">19</span>]]</span><br><span class="line">df21_Jp_PL[<span class="string">&#x27;counts&#x27;</span>] = [df21_Jp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Jp.columns[<span class="number">7</span>:<span class="number">19</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2021 China: Q7_Part12(None) value == 0이므로 결측값 제거</span></span><br><span class="line">df21_Ch_rmQ07P12 = df21_Ch.drop([<span class="string">&#x27;Q7_Part_12&#x27;</span>], axis=<span class="string">&#x27;columns&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Q7(Program_Language): 칼럼번호 8~20 - others - Q7_Part12(None)</span></span><br><span class="line">df21_Ch_PL = pd.DataFrame()</span><br><span class="line">df21_Ch_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df21_Ch_rmQ07P12[col][<span class="number">1</span>:].value_counts() .index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Ch_rmQ07P12.columns[<span class="number">7</span>:<span class="number">18</span>]]</span><br><span class="line">df21_Ch_PL[<span class="string">&#x27;counts&#x27;</span>] = [df21_Ch_rmQ07P12[col][<span class="number">1</span>:].value_counts() .values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Ch_rmQ07P12.columns[<span class="number">7</span>:<span class="number">18</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 제거된 나라 칼럼과 value를 각각 삽입 및 통합</span></span><br><span class="line">df21_Jp_PL.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;Japan&#x27;</span>)</span><br><span class="line">df21_Ch_PL.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;China&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21_PL_JnC = pd.concat([df21_Jp_PL,df21_Ch_PL], ignore_index=<span class="literal">True</span>)</span><br><span class="line">df19_Ch = df19_ChJp[df19_ChJp.Q3.isin([<span class="string">&quot;China&quot;</span>])]</span><br><span class="line">df19_Jp = df19_ChJp[df19_ChJp.Q3.isin([<span class="string">&quot;Japan&quot;</span>])]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Q18(Program_Language): 칼럼번호 83~95 - others</span></span><br><span class="line">df19_Jp_PL = pd.DataFrame()</span><br><span class="line">df19_Jp_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df19_Jp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Jp.columns[<span class="number">82</span>:<span class="number">94</span>]]</span><br><span class="line">df19_Jp_PL[<span class="string">&#x27;counts&#x27;</span>] = [df19_Jp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Jp.columns[<span class="number">82</span>:<span class="number">94</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## 2019 China Q18_Part11(None) 결측값 제거</span></span><br><span class="line">df19_Ch_rmQ18P11 = df19_Ch.drop([<span class="string">&#x27;Q18_Part_11&#x27;</span>], axis=<span class="string">&#x27;columns&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Q18(Program_Language): 칼럼번호 83~95 - others - Q18_Part11(None)</span></span><br><span class="line">df19_Ch_PL = pd.DataFrame()</span><br><span class="line">df19_Ch_PL[<span class="string">&#x27;Program_Language&#x27;</span>] = [df19_Ch_rmQ18P11[col][<span class="number">1</span>:].value_counts() .index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Ch_rmQ18P11.columns[<span class="number">82</span>:<span class="number">93</span>]]</span><br><span class="line">df19_Ch_PL[<span class="string">&#x27;counts&#x27;</span>] = [df19_Ch_rmQ18P11[col][<span class="number">1</span>:].value_counts() .values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Ch_rmQ18P11.columns[<span class="number">82</span>:<span class="number">93</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19_Jp_PL.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;Japan&#x27;</span>)</span><br><span class="line">df19_Ch_PL.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;China&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df19_PL_JnC = pd.concat([df19_Jp_PL,df19_Ch_PL], ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df21_PL_JnC.insert(<span class="number">0</span>, <span class="string">&#x27;year&#x27;</span>,  <span class="string">&#x27;2021&#x27;</span>)</span><br><span class="line">df19_PL_JnC.insert(<span class="number">0</span>, <span class="string">&#x27;year&#x27;</span>,  <span class="string">&#x27;2019&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df_PL_JnC_21n19 = pd.concat([df21_PL_JnC,df19_PL_JnC], ignore_index=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h1 id="Program-Languages"><a href="#Program-Languages" class="headerlink" title="Program Languages"></a>Program Languages</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fig = px.treemap(df_PL_JnC_21n19, path=[px.Constant(<span class="string">&quot;2019n2021&quot;</span>),<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;Program_Language&#x27;</span>,<span class="string">&#x27;Country&#x27;</span>],</span><br><span class="line">                values=<span class="string">&#x27;counts&#x27;</span>, color=<span class="string">&#x27;Country&#x27;</span>,</span><br><span class="line">                  color_discrete_map=&#123;<span class="string">&#x27;(?)&#x27;</span>:<span class="string">&#x27;lightgrey&#x27;</span>, <span class="string">&#x27;China&#x27;</span>:<span class="string">&#x27;gold&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>:<span class="string">&#x27;darkblue&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">fig.data[<span class="number">0</span>].textinfo = <span class="string">&#x27;label+percent parent+value&#x27;</span></span><br><span class="line"></span><br><span class="line">fig.update_layout(margin = <span class="built_in">dict</span>(t=<span class="number">50</span>, l=<span class="number">25</span>, r=<span class="number">25</span>, b=<span class="number">25</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/language.PNG" alt="language"></p>
<h2 id="프로그램-언어"><a href="#프로그램-언어" class="headerlink" title="프로그램 언어"></a>프로그램 언어</h2><h3 id="일본-4"><a href="#일본-4" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년도엔 Python(442)이 가장 높았으며 SQL(150) , R(121) , C++(79) ,Javascript(73), C(70) , Bash(64) , Java(56) 순으로 높았다.</li>
<li>2021년도엔 Python(786)이 가장 높았으며 SQL(232) , C++(164) , C(163) , Javascript(147) , Java(137) , R(122) , Bash(81) 순으로 높았다.</li>
<li>Python과 SQL의 언어 비중이 대부분을 차지 하고 있으며 2019년도에 비해 R의 비중이 크게 감소했다.</li>
</ul>
</blockquote>
<h3 id="중국-4"><a href="#중국-4" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년도엔 Python(375)이 가장 높았으며 SQL(117) , C++(98) , Java(73) , Matlab(67) , C(66) , R(60) , Javascript(38) , Bash(36)순으로 높았다.</li>
<li>2021년도엔 Python(737)이 가장 높았으며 C++(267) , C(225) , SQL(215) , Java(212) , Matlab(169) , Javascript(86) , R(85) , Bash(31)순으로 높았다.</li>
<li>Python의 차지 비율이 대부분을 차지 하고 있으며 2019년도 대비 C++과 C이 급증 했고 R과 Bash는 미미하며 낮은 비중을 차지한다.</li>
</ul>
</blockquote>
<h3 id="2019년도-대비-2021년에는-여전히-Python의-자리는-굳건해졌고-Python을-제외하면-대부분-고른-분포를-보이지만-R과-Bash의-사용률은-굉장히-낮다"><a href="#2019년도-대비-2021년에는-여전히-Python의-자리는-굳건해졌고-Python을-제외하면-대부분-고른-분포를-보이지만-R과-Bash의-사용률은-굉장히-낮다" class="headerlink" title="2019년도 대비 2021년에는 여전히 Python의 자리는 굳건해졌고 Python을 제외하면 대부분 고른 분포를 보이지만 R과 Bash의 사용률은 굉장히 낮다."></a>2019년도 대비 2021년에는 여전히 Python의 자리는 굳건해졌고 Python을 제외하면 대부분 고른 분포를 보이지만 R과 Bash의 사용률은 굉장히 낮다.</h3><h1 id="Which-of-the-following-integrated-development-environments-IDE’s-do-you-use-on-a-regular-basis"><a href="#Which-of-the-following-integrated-development-environments-IDE’s-do-you-use-on-a-regular-basis" class="headerlink" title="Which of the following integrated development environments (IDE’s) do you use on a regular basis?"></a>Which of the following integrated development environments (IDE’s) do you use on a regular basis?</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 앞선 Program_Language에서 선언된 객체로 주석처리</span></span><br><span class="line"><span class="comment">#df21_Ch = df21_ChJp[df21_ChJp.Q3.isin([&quot;China&quot;])]</span></span><br><span class="line"><span class="comment">#df21_Jp = df21_ChJp[df21_ChJp.Q3.isin([&quot;Japan&quot;])]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Q9(IDE&#x27;s): 칼럼번호 22~34 - others</span></span><br><span class="line">df21_Jp_IDEs = pd.DataFrame()</span><br><span class="line">df21_Jp_IDEs[<span class="string">&#x27;IDE\&#x27;s&#x27;</span>] = [df21_Jp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Jp.columns[<span class="number">21</span>:<span class="number">33</span>]]</span><br><span class="line">df21_Jp_IDEs[<span class="string">&#x27;counts&#x27;</span>] = [df21_Jp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Jp.columns[<span class="number">21</span>:<span class="number">33</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21_Ch_IDEs = pd.DataFrame()</span><br><span class="line">df21_Ch_IDEs[<span class="string">&#x27;IDE\&#x27;s&#x27;</span>] = [df21_Ch[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Ch.columns[<span class="number">21</span>:<span class="number">33</span>]]</span><br><span class="line">df21_Ch_IDEs[<span class="string">&#x27;counts&#x27;</span>] = [df21_Ch[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df21_Ch.columns[<span class="number">21</span>:<span class="number">33</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df21_Ch_IDEs.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">df21_Jp_IDEs.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;Japan&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df21_IDEs_JnC = pd.concat([df21_Jp_IDEs,df21_Ch_IDEs], ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#df19_Ch = df19_ChJp[df19.Q3.isin([&quot;China&quot;])]</span></span><br><span class="line"><span class="comment">#df19_Jp = df19_ChJp[df19.Q3.isin([&quot;Japan&quot;])]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Q16(IDE&#x27;s): 칼럼번호 57~69 - others</span></span><br><span class="line">df19_Jp_IDEs = pd.DataFrame()</span><br><span class="line">df19_Jp_IDEs[<span class="string">&#x27;IDE\&#x27;s&#x27;</span>] = [df19_Jp[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Jp.columns[<span class="number">56</span>:<span class="number">68</span>]]</span><br><span class="line">df19_Jp_IDEs[<span class="string">&#x27;counts&#x27;</span>] = [df19_Jp[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Jp.columns[<span class="number">56</span>:<span class="number">68</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19_Ch_IDEs = pd.DataFrame()</span><br><span class="line">df19_Ch_IDEs[<span class="string">&#x27;IDE\&#x27;s&#x27;</span>] = [df19_Ch[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Ch.columns[<span class="number">56</span>:<span class="number">68</span>]]</span><br><span class="line">df19_Ch_IDEs[<span class="string">&#x27;counts&#x27;</span>] = [df19_Ch[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df19_Ch.columns[<span class="number">56</span>:<span class="number">68</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df19_Jp_IDEs.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;China&#x27;</span>)</span><br><span class="line">df19_Ch_IDEs.insert(<span class="number">0</span>, <span class="string">&#x27;Country&#x27;</span>,  <span class="string">&#x27;Japan&#x27;</span>)</span><br><span class="line"></span><br><span class="line">df19_IDEs_JnC = pd.concat([df19_Jp_IDEs,df19_Ch_IDEs], ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">df21_IDEs_JnC.insert(<span class="number">0</span>, <span class="string">&#x27;year&#x27;</span>,  <span class="string">&#x27;2021&#x27;</span>)</span><br><span class="line"><span class="comment">#df21_JCQ9.rename(columns=&#123;&#x27;Q9&#x27;:&#x27;IDE&#x27;&#125;, inplace = True)</span></span><br><span class="line">df19_IDEs_JnC.insert(<span class="number">0</span>, <span class="string">&#x27;year&#x27;</span>,  <span class="string">&#x27;2019&#x27;</span>)</span><br><span class="line"><span class="comment">#df19_JCQ9.rename(columns=&#123;&#x27;Q16&#x27;:&#x27;IDE&#x27;&#125;, inplace = True)</span></span><br><span class="line"></span><br><span class="line">df_IDEs_JnC_21n19 = pd.concat([df21_IDEs_JnC,df19_IDEs_JnC], ignore_index=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 요소명 간략화</span></span><br><span class="line">df_IDEs_JnC_21n19.replace(to_replace = <span class="string">&#x27;Jupyter (JupyterLab, Jupyter Notebooks, etc) &#x27;</span>, value = <span class="string">&#x27;Jupyter&#x27;</span>, inplace = <span class="literal">True</span>)</span><br><span class="line">df_IDEs_JnC_21n19.replace(to_replace = <span class="string">&#x27;Visual Studio / Visual Studio Code&#x27;</span>, value = <span class="string">&#x27;VS / VSCode&#x27;</span>, inplace = <span class="literal">True</span>, regex = <span class="literal">True</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fig = px.treemap(df_IDEs_JnC_21n19, path=[px.Constant(<span class="string">&quot;2019n2021&quot;</span>),<span class="string">&#x27;year&#x27;</span>,<span class="string">&#x27;IDE\&#x27;s&#x27;</span>,<span class="string">&#x27;Country&#x27;</span>],</span><br><span class="line">                values=<span class="string">&#x27;counts&#x27;</span>, color=<span class="string">&#x27;Country&#x27;</span>,</span><br><span class="line">                  color_discrete_map=&#123;<span class="string">&#x27;(?)&#x27;</span>:<span class="string">&#x27;lightgrey&#x27;</span>, <span class="string">&#x27;China&#x27;</span>:<span class="string">&#x27;gold&#x27;</span>, <span class="string">&#x27;Japan&#x27;</span>:<span class="string">&#x27;darkblue&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">fig.data[<span class="number">0</span>].textinfo = <span class="string">&#x27;label+percent parent+value&#x27;</span></span><br><span class="line"></span><br><span class="line">fig.update_layout(margin = <span class="built_in">dict</span>(t=<span class="number">50</span>, l=<span class="number">25</span>, r=<span class="number">25</span>, b=<span class="number">25</span>))</span><br><span class="line"></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/IDES.PNG" alt="IDES"></p>
<h2 id="통합-개발-환경-IDE’s"><a href="#통합-개발-환경-IDE’s" class="headerlink" title="통합 개발 환경(IDE’s)"></a>통합 개발 환경(IDE’s)</h2><ul>
<li> 2021년도 자료에는 문항이 나누어져 있어 Jupyter와 visual이 세부적으로 나뉘져 있다.(편의상 Jupter와 visual로 호칭)<h3 id="일본-5"><a href="#일본-5" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년도엔 Jupyter(293)과 Pycharm(240)이 주를 이르고 있으며 Visual(137)이 세번째의 비중을 차지하고 있으며 뒤따르고 있는 개발 환경들은 비슷비슷한 수치를 보이고 있다.</li>
<li>2021년도엔 Jupyter과 Visual 대부분을 차지 하며 Pycharm과 나머지 항목들이 뒤를 잇고 있다.</li>
<li>Visual의 사용률이 급증했으며 Jupyter와 Visual 이 양대산맥을 이룰정도로 압도적인 수치를 보이고 Pycharm의 증가는 미미하고 Visual에 밀린 모습이다.</li>
</ul>
</blockquote>
<h3 id="중국-5"><a href="#중국-5" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년도엔 Jupyter과 Visual이 주를 이루고 있으며 Vim / Emacs가 세번째로 비중이 컸다 pycharm과 Rstudio가 그 뒤를 따르고 있다.</li>
<li>2021년도엔 Pycharm의 비중이 크게 증가했으며 Jupter와 Visual은 여전히 높은 수치를 보여 주고 있고 Python도 어깨를 나란히 하고 있다.</li>
<li>기존에 높았던 Jupter와 Visual은 더 많은 사람들이 사용을 하고 점유율이 크지 않던 Pycharm이 2021년도가 됨에따라 많은 비중을 차지 한다.</li>
</ul>
</blockquote>
<h3 id="두-나라-모두-Jupyter-Visual-굉장히-큰-비중을-차지하고-있다"><a href="#두-나라-모두-Jupyter-Visual-굉장히-큰-비중을-차지하고-있다" class="headerlink" title="두 나라 모두 Jupyter, Visual 굉장히 큰 비중을 차지하고 있다"></a>두 나라 모두 Jupyter, Visual 굉장히 큰 비중을 차지하고 있다</h3></li>
</ul>
<h1 id="Which-of-the-following-machine-learning-frameworks-do-you-use-on-a-regular-basis"><a href="#Which-of-the-following-machine-learning-frameworks-do-you-use-on-a-regular-basis" class="headerlink" title="Which of the following machine learning frameworks do you use on a regular basis?"></a>Which of the following machine learning frameworks do you use on a regular basis?</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">fig_F = make_subplots(rows=<span class="number">1</span>, cols=<span class="number">2</span>, specs=[[&#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;, &#123;<span class="string">&#x27;type&#x27;</span>:<span class="string">&#x27;xy&#x27;</span>&#125;]])</span><br><span class="line"> </span><br><span class="line">fig_F.add_trace(go.Bar(name=coun_years[<span class="number">0</span>], x=df19_JP_Q16[<span class="string">&#x27;Q28&#x27;</span>].values, y=df19_JP_Q16[<span class="string">&#x27;counts&#x27;</span>].sort_values(ascending=<span class="literal">False</span>).values, marker_color=coun_years_colors[<span class="number">0</span>]),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_F.add_trace(go.Bar(name=coun_years[<span class="number">1</span>], x=df19_CN_Q16[<span class="string">&#x27;Q28&#x27;</span>].values, y=df19_CN_Q16[<span class="string">&#x27;counts&#x27;</span>].sort_values(ascending=<span class="literal">False</span>).values, marker_color=coun_years_colors[<span class="number">1</span>]),<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">fig_F.add_trace(go.Bar(name=coun_years[<span class="number">2</span>], x=df21_JP_Q16[<span class="string">&#x27;Q16&#x27;</span>].values, y=df21_JP_Q16[<span class="string">&#x27;counts&#x27;</span>].sort_values(ascending=<span class="literal">False</span>).values, marker_color=coun_years_colors[<span class="number">2</span>]),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line">fig_F.add_trace(go.Bar(name=coun_years[<span class="number">3</span>], x=df21_CN_Q16[<span class="string">&#x27;Q16&#x27;</span>].values, y=df21_CN_Q16[<span class="string">&#x27;counts&#x27;</span>].sort_values(ascending=<span class="literal">False</span>).values, marker_color=coun_years_colors[<span class="number">3</span>]),<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"> </span><br><span class="line">fig_F.update_layout(title_text=<span class="string">&#x27;2019 &amp; 2021, Machine Learning Frameworks in Use&#x27;</span>,</span><br><span class="line">                    showlegend=<span class="literal">True</span>,</span><br><span class="line">                    autosize=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">fig_F.update_xaxes(title_text=<span class="string">&#x27;2019 Machine Learning Frameworks&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_F.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">1</span>)</span><br><span class="line">fig_F.update_xaxes(title_text=<span class="string">&#x27;2021 Machine Learning Frameworks&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line">fig_F.update_yaxes(title_text=<span class="string">&#x27;Counts&#x27;</span>, row=<span class="number">1</span>, col=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">fig_F.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/frameworks.PNG" alt="frameworks"></p>
<h2 id="머신러닝-프레임워크"><a href="#머신러닝-프레임워크" class="headerlink" title="머신러닝 프레임워크"></a>머신러닝 프레임워크</h2><h3 id="일본-6"><a href="#일본-6" class="headerlink" title="일본"></a>일본</h3><blockquote>
<ul>
<li>2019년도엔 Scikit-learn이 가장 높은 비율을 차지한다.</li>
<li>2021년도엔 Scikit-learn이 가장 높은 비율을 차지한다.</li>
<li>Scikit-learn이 높은 비율을 차지하는것은 여전하다.</li>
</ul>
</blockquote>
<h3 id="중국-6"><a href="#중국-6" class="headerlink" title="중국"></a>중국</h3><blockquote>
<ul>
<li>2019년도엔 Scikit-learn이 가장 높은 비율을 차지한다.</li>
<li>2021년도엔 Scikit-learn이 가장 높은 비율을 차지한다.</li>
<li>Scikit-learn이 높은 비율을 차지하지만 압도적인 사용률을 자랑하진 않는다.</li>
</ul>
</blockquote>
<h3 id="일본은-Scikit-learn이-압도적으로-높은-인기를-자랑하지만-중국은-크게-차이나는-수치는-아니다"><a href="#일본은-Scikit-learn이-압도적으로-높은-인기를-자랑하지만-중국은-크게-차이나는-수치는-아니다" class="headerlink" title="일본은 Scikit-learn이 압도적으로 높은 인기를 자랑하지만 중국은 크게 차이나는 수치는 아니다."></a>일본은 Scikit-learn이 압도적으로 높은 인기를 자랑하지만 중국은 크게 차이나는 수치는 아니다.</h3><h3 id="두-나라-모두-Xgboost-와-Caret-인기가-식었다-반면-PyTorch와-Fast-ai-MXNET-항목들이-성장하여-현재-순위권에-이름을-올렸다"><a href="#두-나라-모두-Xgboost-와-Caret-인기가-식었다-반면-PyTorch와-Fast-ai-MXNET-항목들이-성장하여-현재-순위권에-이름을-올렸다" class="headerlink" title="두 나라 모두 Xgboost 와 Caret 인기가 식었다. 반면 PyTorch와 Fast.ai ,MXNET 항목들이 성장하여 현재 순위권에 이름을 올렸다."></a>두 나라 모두 Xgboost 와 Caret 인기가 식었다. 반면 PyTorch와 Fast.ai ,MXNET 항목들이 성장하여 현재 순위권에 이름을 올렸다.</h3><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><h3 id="막대그래프와-트리맵으로-보는-2019년과-2021년의-차이"><a href="#막대그래프와-트리맵으로-보는-2019년과-2021년의-차이" class="headerlink" title="막대그래프와 트리맵으로 보는 2019년과 2021년의 차이"></a>막대그래프와 트리맵으로 보는 2019년과 2021년의 차이</h3><blockquote>
<ul>
<li>2019년에 비해 2021년도에 크게 캐글러들이 많이 유입된 걸 알 수 있다. 중국은 인구비율에 비해 적은 캐글러의 숫자가 눈에 띈다. 두 나라 모두 젊은층의 인원들이 급격하게 증가했다.</li>
<li>두 나라 모두 대개 남성의 인원이 많다.</li>
</ul>
</blockquote>
<h3 id="동아시아에서-캐글러들의-크게-나타나는-특징"><a href="#동아시아에서-캐글러들의-크게-나타나는-특징" class="headerlink" title="동아시아에서 캐글러들의 크게 나타나는 특징"></a>동아시아에서 캐글러들의 크게 나타나는 특징</h3><blockquote>
<ul>
<li>툴과 언어에 대해서 비슷하지만 다른 양상을 보이고 있다.</li>
<li>Matplotlib,Seaborn,Plotly의 비중이 높아졌다.</li>
<li>프로그래밍 언어는 조금 다른 특징이 있다. 먼저 일본같은 경우 Phython과 SQL의 비중이 가장 높은 반면 중국은 Python의 비중이 크지만 다른 언어들의 비중 차지는 비슷하다. 공통점으로는 R의 언어비중이 크게 감소한게 눈에 띈다. 두 나라 모두 2019년도 대비 2021년도에는 R의 사용량이 많이 낮아졌다.</li>
<li>IDE’s 개발 환경은 두 나라의 경우 쥬피터와 비쥬얼 모두 많은 점유율을 보이고 있으나 다른 프로그램들은 두 프로그램에 비해 낮은 점유율을 보이고 있으며 일본은 파이썬의 비중이 적은 반면 중국은 파이썬의 비중이 커졌다.</li>
<li>머신 러닝 프레임워크같은경우 두 나라가 Scikit-learn이 높은 비율을 차지하는건 동일하지만 나머지 항목들은 비슷하며 Xgboost와 Caret의 점유율이 떨어졌다. 그리고 Pytorch와 Fast.ai,MXNET이 새롭게 이름을 올린 모습을 보인다.</li>
</ul>
</blockquote>
<h3 id="향후-동아시아-미래의-캐글러들의-비전과-트렌드-예측"><a href="#향후-동아시아-미래의-캐글러들의-비전과-트렌드-예측" class="headerlink" title="향후 동아시아 미래의 캐글러들의 비전과 트렌드 예측"></a>향후 동아시아 미래의 캐글러들의 비전과 트렌드 예측</h3><blockquote>
<ul>
<li>캐글러들의 성장이 기대된다 앞으로 캐글러들의 성장은 계속 될 걸로 보인다.</li>
<li>앞서 봤던 나이 분포도를 보면 젊은 인원들의 유입에 의해 캐글시장이 확대 될 걸로 보여진다.</li>
<li>IT산업의 증진에 따라 더욱 많은 인원들이 유입될걸로 보이며 압도적인 수치를 보였던 툴과 언어 머신러닝 프레임워크는 더욱 더 많은 사람들이 사용될 걸로 보인다.</li>
<li>동아시아의 인접한 국가지만 가장 높은 비율이 차지하는것들은 일치하며 동아시아에 많은 영향이 미칠것으로 기대되고 앞으로 주목해야할 포인트라고 보인다.</li>
</ul>
</blockquote>
<h3 id="Referance"><a href="#Referance" class="headerlink" title="Referance"></a>Referance</h3><ul>
<li>plotly bar chart tutorial(<a target="_blank" rel="noopener" href="https://plotly.com/python/bar-charts/">https://plotly.com/python/bar-charts/</a>)</li>
<li>plotly bar chart properties (bar traces)(<a target="_blank" rel="noopener" href="https://plotly.com/python/reference/bar/">https://plotly.com/python/reference/bar/</a>)</li>
<li>plotly pie chart tutorial(<a target="_blank" rel="noopener" href="https://plotly.com/python/pie-charts/">https://plotly.com/python/pie-charts/</a>)</li>
<li>plotly pie chart properties (pie traces)(<a target="_blank" rel="noopener" href="https://plotly.com/python/reference/pie/">https://plotly.com/python/reference/pie/</a>)</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-18T02:18:08.000Z" title="2021. 11. 18. 오전 11:18:08">2021-11-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-26T00:38:03.251Z" title="2021. 11. 26. 오전 9:38:03">2021-11-26</time></span><span class="level-item">5 minutes read (About 772 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/18/kaggle/">kaggle</a></h1><div class="content"><h2 id="kaggle-대회-참여"><a href="#kaggle-대회-참여" class="headerlink" title="kaggle 대회 참여"></a>kaggle 대회 참여</h2><p>텍스트 정리<br>kaggle-survey-2021</p>
<p>###목차</p>
<ol>
<li><p>서론</p>
<ul>
<li>선정이유<ul>
<li>동아시아중 가장 큰 영향력을 행사</li>
<li>비슷한 캐글러의 분포를 가지고 있음</li>
</ul>
</li>
<li>개요<ul>
<li>주제 중국 vs 일본 캐글러 최신 트렌드</li>
<li>2019년도 자료와 2021년도 자료기반 비교</li>
</ul>
</li>
</ul>
</li>
<li><p>본론 </p>
<h4 id="질문선정-배경-시각화로-가장-뚜렷하게-보여줄-수-있는-특징을-지님"><a href="#질문선정-배경-시각화로-가장-뚜렷하게-보여줄-수-있는-특징을-지님" class="headerlink" title="질문선정 배경 (시각화로 가장 뚜렷하게 보여줄 수 있는 특징을 지님)"></a>질문선정 배경 (시각화로 가장 뚜렷하게 보여줄 수 있는 특징을 지님)</h4><h4 id="중국과-일본의-공통점과-차이점-분석-및-시각화"><a href="#중국과-일본의-공통점과-차이점-분석-및-시각화" class="headerlink" title="중국과 일본의 공통점과 차이점 분석 및 시각화"></a>중국과 일본의 공통점과 차이점 분석 및 시각화</h4><ul>
<li><p>Q3 In which country do you currently reside?</p>
<ul>
<li>중국과 일본 두 나라 모두 눈에 띄게 2019년도에 비해 캐글러들의 숫자가 증가</li>
</ul>
</li>
<li><p>Q1 What is your age?</p>
<ul>
<li>두 나라 모두 젊은층에서의 분포가 가장 높게 나타남</li>
<li>일본은 중국에 비해 다양한 연령대의 분포도를 보임</li>
<li>두 나라 모두 2019년과 비교해 2021년에는 18-21의 지표가 증가</li>
</ul>
</li>
<li><p>Q2 What is your gender?</p>
<ul>
<li>일본과 중국 남성이 우세한 지표를 보임</li>
<li>일본은 남성이 90% 여성이 8%</li>
<li>중국은 남성이 80% 여성이 14%</li>
<li>과거와 현재에도 미미한 차이를 보이고 있음</li>
</ul>
</li>
<li><p>Q7 What programming languages do you use on a regular basis?</p>
<ul>
<li>일본과 중국에서 주로 사용하는 언어는 ‘Python’</li>
<li>전체 언어 비율 중 대부분을 차지</li>
<li>일본은 ‘2019년’에는 전체 언어 중 ‘Python’이 약 ‘39%’를 차지</li>
<li>중국은 ‘2019년’에는 전체 언어 중 ‘Python’이 약 ‘40%’를 차지</li>
<li>일본은 ‘2021년’에는 전체 언어 중 ‘Python’이 약 ‘38%’를 차지</li>
<li>중국은 ‘2021년’에는 전체 언어 중 ‘Python’이 약 ‘51%’를 차지</li>
<li>일본은 과거보다 현재 차지 비율이 약 ‘1%’ 감소</li>
<li>중국은 과거보다 현재 차지 비율이 약 ‘11%’나 증가</li>
</ul>
</li>
<li><p>Q9 Which of the following integrated development environments (IDE’s) do you use on a regular basis? (Select all that apply)</p>
<ul>
<li>일본과 중국이 서로 다른 성향을 보임</li>
<li>일본은 ‘2019년’ ‘주피터’와 ‘비주얼(VS)’를 주로 사용</li>
<li>중국은 ‘2019년’ ‘주피터’,‘파이참’,‘비주얼(VS)’을 주로 사용</li>
<li>일본은 과거와 비교해 사용 비율이 미미하지만 각 각 ‘6%’,‘4%’ 증가</li>
<li>중국은 과거와 비교해 사용 비율이</li>
<li>각 각 파이참이 ‘3%’(증가), 주피터 ‘2%’(증가), 비주얼 ‘11%’(증가)</li>
</ul>
</li>
<li><p>Q14 What data visualization libraries or tools do you use on a regular basis? (Select all that apply)</p>
<ul>
<li>Matplotlib와 Seaborn의 숫자가 급격하게 늘어남</li>
<li>2019년에 높은 사용률을 보였던 plotly/plotly Express 와 Ggplot/ggplot2 2021년도엔 두 나라 모두 낮은 점유율을 보이고 있음</li>
<li>과거의 다른 항목들은 현재 미미하거나 낮아짐</li>
</ul>
</li>
</ul>
</li>
<li><p>결론</p>
<ul>
<li>지표로 보는 2019년과 2021년의 차이</li>
<li>동아시아에서 캐글러들의 크게 나타나는 특징</li>
<li>향후 동아시아 미래의 캐글러들의 비전과 트렌드 예측</li>
</ul>
</li>
</ol>
<p>캐글 작성본<br><a target="_blank" rel="noopener" href="https://www.kaggle.com/kwdoku145/the-latest-trends-in-east-asia-japan-and-china">https://www.kaggle.com/kwdoku145/the-latest-trends-in-east-asia-japan-and-china</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-16T02:44:58.000Z" title="2021. 11. 16. 오전 11:44:58">2021-11-16</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-16T02:49:20.351Z" title="2021. 11. 16. 오전 11:49:20">2021-11-16</time></span><span class="level-item">a few seconds read (About 103 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/16/error/">error</a></h1><div class="content"><h1 id="에러"><a href="#에러" class="headerlink" title="에러"></a>에러</h1><p>IndexError: index 0 is out of bounds for axis 0 with size 0</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#index 값출력 도중 에러발생</span></span><br><span class="line">df_CQ7 = pd.DataFrame()</span><br><span class="line">df_CQ7[<span class="string">&#x27;Q7&#x27;</span>] = [df_Ch[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df_Ch.columns[<span class="number">7</span>:<span class="number">20</span>]]</span><br><span class="line">df_CQ7[<span class="string">&#x27;counts&#x27;</span>] = [df_Ch[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df_Ch.columns[<span class="number">7</span>:<span class="number">20</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(df_CQ7)</span><br></pre></td></tr></table></figure>
<p><img src="/img/error.PNG" alt="error"></p>
<p>value값이 0인 칼럼을 제거 했더니 오류가 없어졌다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df21_Ch_rmQ7P12 = df21_Ch.drop([<span class="string">&#x27;Q7_Part_12&#x27;</span>], axis=<span class="string">&#x27;columns&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="/img/error01.PNG" alt="error01"></p>
<p>정상출력</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-12T03:43:16.000Z" title="2021. 11. 12. 오후 12:43:16">2021-11-12</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-16T02:44:51.728Z" title="2021. 11. 16. 오전 11:44:51">2021-11-16</time></span><span class="level-item">2 minutes read (About 364 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/12/graph/">graph</a></h1><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line">colors = [<span class="string">&#x27;#B1EDED&#x27;</span>,<span class="string">&#x27;#B1B2ED&#x27;</span>,<span class="string">&#x27;#1DE7ED&#x27;</span>,<span class="string">&#x27;#1DA5ED&#x27;</span>,<span class="string">&#x27;#1D50ED&#x27;</span>,<span class="string">&#x27;#16548E&#x27;</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#데이터불러오기</span></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;../input/123123123123/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#불러온 데이터값중 분류하고 하는 데이터프레임으로 나누기</span></span><br><span class="line">df = df[df.Q3.isin([<span class="string">&quot;Japan&quot;</span>,<span class="string">&quot;China&quot;</span>])]</span><br><span class="line"><span class="built_in">print</span>(df.shape)</span><br><span class="line">df.sample(<span class="number">5</span>) <span class="comment">#5줄로 샘플표시</span></span><br></pre></td></tr></table></figure>

<h2 id="Age-막대그래프"><a href="#Age-막대그래프" class="headerlink" title="Age 막대그래프"></a>Age 막대그래프</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 데이터 프레임 정의</span></span><br><span class="line">df_ch = df[df.Q3.isin([<span class="string">&quot;China&quot;</span>])]</span><br><span class="line">df_ja = df[df.Q3.isin([<span class="string">&quot;Japan&quot;</span>])]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">df_ch_sort = df_ch[<span class="string">&#x27;Q1&#x27;</span>].value_counts().sort_index()</span><br><span class="line">df_ja_sort = df_ja[<span class="string">&#x27;Q1&#x27;</span>].value_counts().sort_index()</span><br><span class="line"><span class="comment"># sort 명령어로 x축 정리</span></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;Japan&#x27;</span>, x=df_ja_sort.index, y=df_ja_sort.values, marker_color=colors[<span class="number">3</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;China&#x27;</span>, x=df_ch_sort.index, y=df_ch_sort.values, marker_color=colors[<span class="number">2</span>])])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;group&#x27;</span>, title=<span class="string">&#x27;China &amp; Japan Age&#x27;</span>, xaxis_title=<span class="string">&#x27;Age&#x27;</span>, yaxis_title=<span class="string">&#x27;Counts&#x27;</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/age3.PNG" alt="age3"></p>
<h2 id="Gender-Pie-그래프"><a href="#Gender-Pie-그래프" class="headerlink" title="Gender Pie 그래프"></a>Gender Pie 그래프</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 중국데이터프레임을 가지고 파이그래프 그리기</span></span><br><span class="line">fig = go.Figure(data=[go.Pie(labels=df_ch[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().index, values=df_ch[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().values, textinfo=<span class="string">&#x27;label+percent&#x27;</span>)])</span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=colors[<span class="number">2</span>:]))</span><br><span class="line">fig.update_layout(title_text=<span class="string">&#x27;China Gender Distribution&#x27;</span>, showlegend=<span class="literal">True</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/chinagen.PNG" alt="chinagen"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 일본데이터 프레임을 가지고 파이그래프 그리기</span></span><br><span class="line">fig = go.Figure(data=[go.Pie(labels=df_ja[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().index, values=df_ja[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().values, textinfo=<span class="string">&#x27;label+percent&#x27;</span>)])</span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=colors[<span class="number">2</span>:]))</span><br><span class="line">fig.update_layout(title_text=<span class="string">&#x27;Japan Gender Distribution&#x27;</span>, showlegend=<span class="literal">True</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/japangen.PNG" alt="japangen"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-09T01:53:11.000Z" title="2021. 11. 9. 오전 10:53:11">2021-11-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-09T03:03:04.887Z" title="2021. 11. 9. 오후 12:03:04">2021-11-09</time></span><span class="level-item">4 minutes read (About 541 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/09/plotly04/">plotly04</a></h1><div class="content"><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#B1EDED&#x27;</span>,<span class="string">&#x27;#B1B2ED&#x27;</span>,<span class="string">&#x27;#1DE7ED&#x27;</span>,<span class="string">&#x27;#1DA5ED&#x27;</span>,<span class="string">&#x27;#1D50ED&#x27;</span>,<span class="string">&#x27;#16548E&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;../input/kaggle/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># df_env를 dataframe 변수형식 객체로 지정</span></span><br><span class="line">df_env = pd.DataFrame()</span><br><span class="line"><span class="built_in">print</span>(df_env)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># value_counts 함수</span></span><br><span class="line"><span class="comment"># (https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.value_counts.html?highlight=value_counts#pandas.DataFrame.value_counts)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## df_env객체에 dev_env 칼럼을 삽입하고 df 객체의 21~34 칼럼에 해당하는 index를 뽑아서 0에 위치한 값을 저장</span></span><br><span class="line">df_env[<span class="string">&#x27;dev_env&#x27;</span>] = [df[col][<span class="number">1</span>:].value_counts().index[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df.columns[<span class="number">21</span>:<span class="number">34</span>]]</span><br><span class="line"><span class="built_in">print</span>(df_env)</span><br><span class="line"></span><br><span class="line"><span class="comment">## df_env객체에 counts 칼럼을 삽입하고 df 객체의 21~34 칼럼에 해당하는 value를 뽑아서 0에 위치한 값을 저장</span></span><br><span class="line">df_env[<span class="string">&#x27;counts&#x27;</span>] = [df[col][<span class="number">1</span>:].value_counts().values[<span class="number">0</span>] <span class="keyword">for</span> col <span class="keyword">in</span> df.columns[<span class="number">21</span>:<span class="number">34</span>]]</span><br><span class="line"><span class="built_in">print</span>(df_env)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># sort_values 함수</span></span><br><span class="line"><span class="comment"># https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sort_values.html#pandas.DataFrame.sort_values</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## df_env 객체에 정렬 기준점을 &#x27;counts&#x27; colums로 잡고 오름차순(ascending)으로 정렬할지를 설정한다. inplace = True인 경우 해당 정렬을 객체에서 수행한다.</span></span><br><span class="line">df_env.sort_values(by=<span class="string">&#x27;counts&#x27;</span>, ascending=<span class="literal">False</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(df_env)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># plotly.express.treemap  # high-level interface</span></span><br><span class="line"><span class="comment"># H: https://plotly.com/python-api-reference/generated/plotly.express.treemap.html</span></span><br><span class="line"><span class="comment"># L: https://plotly.com/python-api-reference/generated/plotly.graph_objects.Treemap.html#id1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## treemap figure로 시각화</span></span><br><span class="line">fig = px.treemap(df_env, path=[px.Constant(<span class="string">&quot;all&quot;</span>),<span class="string">&#x27;dev_env&#x27;</span>], </span><br><span class="line">                 values=<span class="string">&#x27;counts&#x27;</span>, color=<span class="string">&#x27;counts&#x27;</span>, color_continuous_scale=colors)</span><br><span class="line"><span class="comment"># treemap(DF형식 객체, path(경로)=[# path 해석: all 이라는 상수를 만들어 dev_env 칼럼 전체를 삽입했다],</span></span><br><span class="line"><span class="comment">#         values(정렬기준)=&#x27;객체&#x27;, color=&#x27;비율을 color로 표현(우측에 counts에 관한 기준 표현)&#x27;)</span></span><br><span class="line"><span class="comment">#         color_continuous_scale=&#x27;CSS 형식의 색상을 정의해서 원하는 연속적인 색상으로 표현&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># figure </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># figure 경로 업데이트</span></span><br><span class="line">fig.update_traces(root_color=<span class="string">&quot;red&quot;</span>)</span><br><span class="line"><span class="comment"># root 오퍼레이터의 color 변경</span></span><br><span class="line"><span class="comment"># [root] https://plotly.com/python-api-reference/generated/plotly.graph_objects.icicle.html#plotly.graph_objects.icicle.Root</span></span><br><span class="line"><span class="comment"># but, color 표현의 방식이 counts의 비율로 설정되었기 때문에 적용되지 않는다.(by: color=&#x27;counts&#x27;)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># figure 구조를 업데이트하고 타이틀 지정</span></span><br><span class="line">fig.update_layout(title=<span class="string">&#x27;Development environment used by kagglers&#x27;</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/ad.PNG" alt="ad"><br><img src="/img/add.PNG" alt="add"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-09T01:52:25.000Z" title="2021. 11. 9. 오전 10:52:25">2021-11-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-09T01:57:22.025Z" title="2021. 11. 9. 오전 10:57:22">2021-11-09</time></span><span class="level-item">4 minutes read (About 558 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/09/plotly03/">plotly03</a></h1><div class="content"><p>필사</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#B1EDED&#x27;</span>,<span class="string">&#x27;#B1B2ED&#x27;</span>,<span class="string">&#x27;#1DE7ED&#x27;</span>,<span class="string">&#x27;#1DA5ED&#x27;</span>,<span class="string">&#x27;#1D50ED&#x27;</span>,<span class="string">&#x27;#16548E&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;../input/kaggle/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fig = px.funnel_area(names=df[<span class="string">&#x27;Q6&#x27;</span>][<span class="number">1</span>:].value_counts().index,</span><br><span class="line">                     values=df[<span class="string">&#x27;Q6&#x27;</span>][<span class="number">1</span>:].value_counts().values, title=<span class="string">&#x27;Coding Experince&#x27;</span>)</span><br><span class="line"><span class="comment"># 피규어 모형: funnel_area 깔때기형 차트, 데이터프레임 Q6 불러오기 및 (index)값 출력, [배열순서 1번행부터 시작], </span></span><br><span class="line"><span class="comment"># 피규어 모형: funnel_area 깔때기형 차트, 데이터프레임 Q6 불러오기 및 (values)값 출력, [배열순서 1번행부터 시작], 제목 &#x27;Coding Experince&#x27;</span></span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=colors[::-<span class="number">1</span>]))</span><br><span class="line"><span class="comment"># 모형 업데이트: 모형 지정, 색 한칸당 -1 단계씩 변하도록 변경</span></span><br><span class="line">fig.show()</span><br><span class="line"><span class="comment"># 모형 작동</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/aa.PNG" alt="aa"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#퍼센트 표기 예시용코드</span></span><br><span class="line">df1 = df[<span class="string">&#x27;Q1&#x27;</span>].value_counts()</span><br><span class="line">df2 = df[<span class="string">&#x27;Q1&#x27;</span>].value_counts(normalize = <span class="literal">True</span>)</span><br><span class="line">val_pnt_df = pd.DataFrame(&#123;<span class="string">&quot;count&quot;</span>:df1,<span class="string">&quot;%&quot;</span>:df2*<span class="number">100</span>&#125;)</span><br><span class="line"></span><br><span class="line">fig = go.Figure()</span><br><span class="line"><span class="comment"># [str(x) + &#x27; %&#x27; for x in np.round(val_pnt_df[&quot;%&quot;].values, 1).tolist()]</span></span><br><span class="line"><span class="comment"># Add Traces</span></span><br><span class="line">fig.add_bar(x = val_pnt_df.index,</span><br><span class="line">            y = val_pnt_df[<span class="string">&#x27;count&#x27;</span>].values, </span><br><span class="line">            text = [<span class="built_in">str</span>(x) + <span class="string">&#x27; %&#x27;</span> <span class="keyword">for</span> x <span class="keyword">in</span> np.<span class="built_in">round</span>(val_pnt_df[<span class="string">&quot;%&quot;</span>].values, <span class="number">1</span>).tolist()], </span><br><span class="line">            textposition=<span class="string">&quot;auto&quot;</span>)</span><br><span class="line"></span><br><span class="line">fig.update_layout(title_text = <span class="string">&quot;Q1. questions[1]&quot;</span>)</span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/aaa.PNG" alt="aaa"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">df_py = df[(df[<span class="string">&#x27;Q7_Part_1&#x27;</span>] == <span class="string">&#x27;Python&#x27;</span>)]</span><br><span class="line">df_r = df[(df[<span class="string">&#x27;Q7_Part_2&#x27;</span>] == <span class="string">&#x27;R&#x27;</span>)]</span><br><span class="line"><span class="comment"># 데이터프레임 파이썬 Q7_Part_1 불러오기</span></span><br><span class="line"><span class="comment"># 데이터프레임 R Q7_Part_2 불러오기</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;Python&#x27;</span>, x=df_py[<span class="string">&#x27;Q1&#x27;</span>].value_counts().index, y=df_py[<span class="string">&#x27;Q1&#x27;</span>].value_counts().values, marker_color=colors[<span class="number">2</span>]),</span><br><span class="line">    go.Bar(name=<span class="string">&#x27;R&#x27;</span>, x=df_r[<span class="string">&#x27;Q1&#x27;</span>].value_counts().index, y=df_r[<span class="string">&#x27;Q1&#x27;</span>].value_counts().values, marker_color=colors[<span class="number">3</span>])])</span><br><span class="line"><span class="comment"># 피규어 생성, 바 이름: 파이썬, x축 파이썬 데이터프레임에 Q1 불러오기, index 고유값 출력</span></span><br><span class="line"><span class="comment"># y축 파이썬 데이터프레임에 Q1 불러오기, values 고유값 출력</span></span><br><span class="line"><span class="comment"># 마커색 2번 (하늘색)</span></span><br><span class="line"><span class="comment"># 바 이름: R, x축 R 데이터프레임에 Q1 불러오기, index 고유값 출력</span></span><br><span class="line"><span class="comment"># y축 R 데이터프레임에 Q1 불러오기, values 고유값 출력</span></span><br><span class="line"><span class="comment"># 마커색 3번 (파랑색)</span></span><br><span class="line"></span><br><span class="line">fig.update_layout(barmode=<span class="string">&#x27;group&#x27;</span>, title=<span class="string">&#x27;Kagglers using Python and R on regular basis by Age&#x27;</span>, xaxis_title=<span class="string">&#x27;Age&#x27;</span>, yaxis_title=<span class="string">&#x27;Counts&#x27;</span>)</span><br><span class="line">fig.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 그래프 그룹형, 피규어 타이틀 &#x27;Kagglers using Python and R on regular basis by Age&#x27;, X축 소제목 &#x27;Age&#x27;, Y축 소제목 &#x27;Counts&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="/img/age2.PNG" alt="age2"></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-09T01:13:17.000Z" title="2021. 11. 9. 오전 10:13:17">2021-11-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-09T01:52:15.833Z" title="2021. 11. 9. 오전 10:52:15">2021-11-09</time></span><span class="level-item">3 minutes read (About 402 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/09/plotly02/">plotly02</a></h1><div class="content"><p>필사</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#B1EDED&#x27;</span>,<span class="string">&#x27;#B1B2ED&#x27;</span>,<span class="string">&#x27;#1DE7ED&#x27;</span>,<span class="string">&#x27;#1DA5ED&#x27;</span>,<span class="string">&#x27;#1D50ED&#x27;</span>,<span class="string">&#x27;#16548E&#x27;</span>]</span><br><span class="line"></span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;../input/kaggle/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">fig = go.Figure( data=[go.Pie(labels = df[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().index, <span class="comment"># 값에 붙일 이름</span></span><br><span class="line">                              values = df[<span class="string">&#x27;Q2&#x27;</span>][<span class="number">1</span>:].value_counts().values, <span class="comment"># 나타낼 값</span></span><br><span class="line">                              textinfo = <span class="string">&#x27;label+percent&#x27;</span>)]) <span class="comment"># 그래프 항목당 나타낼 텍스트</span></span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=colors[<span class="number">2</span>:])) <span class="comment"># 그래프를 어떤 색으로 표현할 것인지</span></span><br><span class="line">fig.update_layout(title_text=<span class="string">&#x27;Gender Distribution&#x27;</span>, showlegend=<span class="literal">False</span>) <span class="comment"># 그래프의 레이아웃 설정</span></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/gender.PNG" alt="gender"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">man = df[df[<span class="string">&#x27;Q2&#x27;</span>] == <span class="string">&#x27;Man&#x27;</span>][<span class="string">&#x27;Q1&#x27;</span>].value_counts() <span class="comment"># 성별이 남성[df[&#x27;Q2&#x27;] == &#x27;Man&#x27;]인 행에서 나이[&#x27;Q1&#x27;]의 값을 카운트하여 시리즈로 만듦.</span></span><br><span class="line">woman = df[df[<span class="string">&#x27;Q2&#x27;</span>] == <span class="string">&#x27;Woman&#x27;</span>][<span class="string">&#x27;Q1&#x27;</span>].value_counts() <span class="comment"># 성별이 여성[df[&#x27;Q2&#x27;] == &#x27;WoMan&#x27;]인 행에서 나이[&#x27;Q1&#x27;]의 값을 카운트하여 시리즈로 만듦.</span></span><br><span class="line">textonbar_man = [</span><br><span class="line">                    <span class="built_in">round</span>((m/(m+w))*<span class="number">100</span>, <span class="number">1</span>) </span><br><span class="line">                    <span class="keyword">for</span> m, w <span class="keyword">in</span> <span class="built_in">zip</span>(man.values, woman.values)]</span><br><span class="line">textonbar_woman = [</span><br><span class="line">                    <span class="built_in">round</span>((w/(m+w))*<span class="number">100</span>, <span class="number">1</span>) </span><br><span class="line">                    <span class="keyword">for</span> m, w <span class="keyword">in</span> <span class="built_in">zip</span>(man.values, woman.values)]</span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[</span><br><span class="line">                        go.Bar(name=<span class="string">&#x27;Man&#x27;</span>, <span class="comment"># 막대의 항목이름</span></span><br><span class="line">                               x=man.index, <span class="comment"># x축에 man의 인덱스</span></span><br><span class="line">                               y=man.values, <span class="comment"># y축에 man의 값</span></span><br><span class="line">                               text=textonbar_man, <span class="comment"># 막대의 값을 작성해줄 텍스트</span></span><br><span class="line">                               marker_color=colors[<span class="number">2</span>]), <span class="comment">#막대 색</span></span><br><span class="line">                        go.Bar(name=<span class="string">&#x27;Woman&#x27;</span>, </span><br><span class="line">                               x=woman.index, </span><br><span class="line">                               y=woman.values, </span><br><span class="line">                               text=textonbar_woman, </span><br><span class="line">                               marker_color=colors[<span class="number">3</span>])</span><br><span class="line">])</span><br><span class="line">fig.update_traces(</span><br><span class="line">                    texttemplate=<span class="string">&#x27;%&#123;text:.3s&#125;%&#x27;</span>, <span class="comment"># 수치가 그래프에서 어느정도 멀어지는지</span></span><br><span class="line">                    textposition=<span class="string">&#x27;inside&#x27;</span>) <span class="comment"># 값의 위치</span></span><br><span class="line">fig.update_layout(</span><br><span class="line">                    barmode=<span class="string">&#x27;stack&#x27;</span>, <span class="comment"># 막대의 형태</span></span><br><span class="line">                    title_text=<span class="string">&#x27;Age distribution by gender&#x27;</span>, <span class="comment"># 제목</span></span><br><span class="line">                    xaxis_title=<span class="string">&#x27;Age&#x27;</span>, <span class="comment"># x축 제목</span></span><br><span class="line">                    yaxis_title=<span class="string">&#x27;Counts&#x27;</span>) <span class="comment"># y축 제목</span></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>

<p><img src="/img/age.PNG" alt="age"></p>
<h3 id="REFERENCE"><a href="#REFERENCE" class="headerlink" title="REFERENCE"></a>REFERENCE</h3><p><a target="_blank" rel="noopener" href="https://plotly.com/python-api-reference/index.html">https://plotly.com/python-api-reference/index.html</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-08T02:55:57.000Z" title="2021. 11. 8. 오전 11:55:57">2021-11-08</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-09T01:08:25.737Z" title="2021. 11. 9. 오전 10:08:25">2021-11-09</time></span><span class="level-item">2 minutes read (About 269 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/08/plotly/">plotly</a></h1><div class="content"><h2 id="코드분석-노트북"><a href="#코드분석-노트북" class="headerlink" title="코드분석 노트북"></a>코드분석 노트북</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go</span><br><span class="line"><span class="keyword">from</span> warnings <span class="keyword">import</span> filterwarnings</span><br><span class="line">filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">colors = [<span class="string">&#x27;#B1EDED&#x27;</span>,<span class="string">&#x27;#B1B2ED&#x27;</span>,<span class="string">&#x27;#1DE7ED&#x27;</span>,<span class="string">&#x27;#1DA5ED&#x27;</span>,<span class="string">&#x27;#1D50ED&#x27;</span>,<span class="string">&#x27;#16548E&#x27;</span>]</span><br><span class="line">df = pd.read_csv(<span class="string">&#x27;../input/kwdoku145/kaggle_survey_2021_responses.csv&#x27;</span>)</span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure>
<p><img src="/img/kaggle.PNG" alt="kaggle"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">##fig &gt; go.Figure &gt; data: 그래프가 그려지는 데이터 담기</span></span><br><span class="line"></span><br><span class="line">fig = go.Figure(data=[go.Pie(labels=df[<span class="string">&#x27;Q4&#x27;</span>][<span class="number">1</span>:].value_counts().index,</span><br><span class="line">                             values=df[<span class="string">&#x27;Q4&#x27;</span>][<span class="number">1</span>:].value_counts().values, textinfo=<span class="string">&#x27;label+percent&#x27;</span>)]) </span><br><span class="line"><span class="comment">## go.Pie 원형그래프 </span></span><br><span class="line"><span class="comment">## Q4의 데이터 값을 가져옴 index 내용 / valuses 값</span></span><br><span class="line"><span class="comment">## textinfo=&#x27;label+percent 표안에 퍼센트와 내용기입</span></span><br><span class="line"></span><br><span class="line">fig.update_traces(marker=<span class="built_in">dict</span>(colors=colors[<span class="number">2</span>:]))</span><br><span class="line"><span class="comment">## 형성된 fig에 추가적인 시각적요소 삽입  /색깔입히기</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig.update_layout(title_text=<span class="string">&#x27;Formal Education attained or plan to attain in next 2 year&#x27;</span>, showlegend=<span class="literal">False</span>)</span><br><span class="line"><span class="comment">## fig &gt; go.Figure &gt; layout: 그래프의 부가정보 기입, 그래프 크기 등 조절 </span></span><br><span class="line"><span class="comment">## 형성된 fig에 레이아웃 계속 업데이트 가능</span></span><br><span class="line"><span class="comment">## title_text=&#x27;&#x27;그래프 제목 / showlegend=&#x27;False&#x27; 범례숨기기</span></span><br><span class="line">fig.show()</span><br></pre></td></tr></table></figure>
<p><img src="/img/pie.PNG" alt="pie"></p>
<h2 id="Reference-Pie"><a href="#Reference-Pie" class="headerlink" title="Reference Pie"></a>Reference Pie</h2><p>URL:<a target="_blank" rel="noopener" href="https://plotly.com/python/reference/pie/">https://plotly.com/python/reference/pie/</a></p>
<p>URL:<a target="_blank" rel="noopener" href="https://github.com/plotly/plotly.py/blob/master/doc/python/pie-charts.md">https://github.com/plotly/plotly.py/blob/master/doc/python/pie-charts.md</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-04T02:51:53.000Z" title="2021. 11. 4. 오전 11:51:53">2021-11-04</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-09T01:08:25.736Z" title="2021. 11. 9. 오전 10:08:25">2021-11-09</time></span><span class="level-item">3 minutes read (About 495 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/04/DecisionTree/">DecisionTree</a></h1><div class="content"><h2 id="Decision-Tree"><a href="#Decision-Tree" class="headerlink" title="Decision Tree"></a>Decision Tree</h2><h3 id="개념"><a href="#개념" class="headerlink" title="개념"></a>개념</h3><ul>
<li>의사결정트리는 일련의 분류 규칙을 통해 데이터를 분류,회귀하는 지도 학습 모델 중 하나</li>
<li>결과 모델이 Tree 구조를 가지고 있기때문에 Decision Tree 라는 이름을 가짐</li>
<li>예측 변수를 기반으로 결과를 분류하거나 예측</li>
</ul>
<h3 id="대표적인-의사결정트리-예시"><a href="#대표적인-의사결정트리-예시" class="headerlink" title="대표적인 의사결정트리 예시"></a>대표적인 의사결정트리 예시</h3><p><img src="/img/tree.PNG" alt="Decision Tree"></p>
<ul>
<li>두 가지로 나뉘는 부분들을 분기라 부름</li>
<li>분기들중 가장 위에 있는 분기를 루트 노드</li>
<li>(yes,no) 결정 노드</li>
<li>맨 밑에 있는 노드를 잎 노드</li>
</ul>
<p><img src="/img/tree2.PNG" alt="ex"></p>
<h3 id="의사결정트리-모형-만들기"><a href="#의사결정트리-모형-만들기" class="headerlink" title="의사결정트리 모형 만들기"></a>의사결정트리 모형 만들기</h3><ul>
<li>크게 성장(growing),가지치기(pruning)단계를 통하여 만들어진다.</li>
<li>성장단계에서는 먼저 최적화할 목적함수를 정한다.</li>
<li>가지치기단계에서는 과적합(overfitting)을 방지, 해석이 안되는 규칙등 불필요한 가지를 제거한다.</li>
<li>출력 변수가 연속형이면 회귀나무(regression tree)</li>
<li>출력 변수가 범주형이면 번류나무(classification)</li>
</ul>
<h3 id="의사결정트리-구현하기"><a href="#의사결정트리-구현하기" class="headerlink" title="의사결정트리 구현하기"></a>의사결정트리 구현하기</h3><p><img src="/img/tree3.PNG" alt="구현"></p>
<ul>
<li>먼저 주어진 데이터의 조건을 확인</li>
<li>조건을 만족한 노드의 분리를 멈춘다, 만약 해당 노드가 왼쪽(오른쪽)노드라면 오른쪽(왼쪽)데이터에 대해서 동일한 과정을 반복</li>
<li>조건을 만족하지 않는경우 모든 설명 변수에 대해 분리기준 후보생성후 불순도 측정을 이용해 최적 분리기준을 찾고 이를 통해 데이터를 분리한다. 이경우 데이터는 왼쪽과 오른쪽 데이터로 나누어지고 이 2개의 데이터에 대해서 동일한 과정을 반복한다.</li>
</ul>
<h3 id="참조"><a href="#참조" class="headerlink" title="[참조]"></a>[참조]</h3><ul>
<li>Decision Tree 정리글 URL:<a target="_blank" rel="noopener" href="https://zephyrus1111.tistory.com/124">https://zephyrus1111.tistory.com/124</a></li>
<li>소스 참고: <a target="_blank" rel="noopener" href="https://scikit-learn.org/stable/modules/tree.html#regression">https://scikit-learn.org/stable/modules/tree.html#regression</a></li>
<li>영상 참고: <a target="_blank" rel="noopener" href="https://www.youtube.com/results?search_query=decision+tree+">https://www.youtube.com/results?search_query=decision+tree+</a></li>
</ul>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">Previous</a></div><div class="pagination-next"><a href="/page/2/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">9</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ppoffice" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ppoffice"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-02T00:54:53.000Z">2021-12-02</time></p><p class="title"><a href="/2021/12/02/project02/">project02</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-26T02:50:53.000Z">2021-11-26</time></p><p class="title"><a href="/2021/11/26/project01/">project01</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-18T02:18:08.000Z">2021-11-18</time></p><p class="title"><a href="/2021/11/18/kaggle/">kaggle</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-16T02:44:58.000Z">2021-11-16</time></p><p class="title"><a href="/2021/11/16/error/">error</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-12T03:43:16.000Z">2021-11-12</time></p><p class="title"><a href="/2021/11/12/graph/">graph</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">16</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/R/"><span class="tag">R</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/image/"><span class="tag">image</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kaggle/"><span class="tag">kaggle</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/machineLearning/"><span class="tag">machineLearning</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/phython/"><span class="tag">phython</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sql/"><span class="tag">sql</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/upload/"><span class="tag">upload</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="myworld" height="28"></a><p class="is-size-7"><span>&copy; 2021 dogeun</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>